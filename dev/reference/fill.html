<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fill in missing values with previous or next value — fill • tidyr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">



<meta property="og:title" content="Fill in missing values with previous or next value — fill" />
<meta property="og:description" content="Fills missing values in selected columns using the next or previous entry.
This is useful in the common output format where values are not repeated,
and are only recorded when they change." />
<meta property="og:image" content="https://tidyr.tidyverse.org/logo.png" />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">tidyr</a>
        <div class="info">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.0.2.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/tidy-data.html">Tidy data</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/in-packages.html">In packages</a>
    </li>
    <li>
      <a href="../articles/nest.html">Nested data</a>
    </li>
    <li>
      <a href="../articles/pivot.html">Pivoting</a>
    </li>
    <li>
      <a href="../articles/rectangle.html">Rectangling</a>
    </li>
    <li>
      <a href="../articles/tidy-data.html">Tidy data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Release notes</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/09/tidyr-1-0-0/">Version 1.0.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/02/tidyr-0-8-0/">Version 0.8.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2017/08/tidyr-0.7.0/">Version 0.7.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2016/08/15/tidyr-0-6-0/">Version 0.6.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2016/06/13/tidyr-0-5-0/">Version 0.5.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2016/02/02/tidyr-0-4-0/">Version 0.5.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2015/09/13/tidyr-0-3-0/">Version 0.4.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2014/12/08/tidyr-0-2-0/">Version 0.2.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2014/07/22/introducing-tidyr/">Version 0.1.0</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/tidyverse/tidyr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Fill in missing values with previous or next value</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidyverse/tidyr/blob/master/R/fill.R'><code>R/fill.R</code></a></small>
    <div class="hidden name"><code>fill.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fills missing values in selected columns using the next or previous entry.
This is useful in the common output format where values are not repeated,
and are only recorded when they change.</p>
    </div>

    <pre class="usage"><span class='fu'>fill</span>(<span class='no'>data</span>, <span class='no'>...</span>, <span class='kw'>.direction</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"down"</span>, <span class='st'>"up"</span>, <span class='st'>"downup"</span>, <span class='st'>"updown"</span>))</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>A selection of columns. If empty, nothing happens. You can
supply bare variable names, select all variables between <code>x</code> and <code>z</code>
with <code>x:z</code>, exclude <code>y</code> with <code>-y</code>. For more selection options, see the
<code><a href='https://dplyr.tidyverse.org/reference/select.html'>dplyr::select()</a></code> documentation.</p></td>
    </tr>
    <tr>
      <th>.direction</th>
      <td><p>Direction in which to fill missing values. Currently
either "down" (the default), "up", "downup" (i.e. first down and then up)
or "updown" (first up and then down).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Missing values are replaced in atomic vectors; <code>NULL</code>s are replaced in lists.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Value (year) is recorded only when it changes</span>
<span class='no'>sales</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>tibble</span><span class='kw ns'>::</span><span class='fu'><a href='https://tibble.tidyverse.org/reference/tribble.html'>tribble</a></span>(
  ~<span class='no'>quarter</span>, ~<span class='no'>year</span>, ~<span class='no'>sales</span>,
  <span class='st'>"Q1"</span>,    <span class='fl'>2000</span>,    <span class='fl'>66013</span>,
  <span class='st'>"Q2"</span>,      <span class='fl'>NA</span>,    <span class='fl'>69182</span>,
  <span class='st'>"Q3"</span>,      <span class='fl'>NA</span>,    <span class='fl'>53175</span>,
  <span class='st'>"Q4"</span>,      <span class='fl'>NA</span>,    <span class='fl'>21001</span>,
  <span class='st'>"Q1"</span>,    <span class='fl'>2001</span>,    <span class='fl'>46036</span>,
  <span class='st'>"Q2"</span>,      <span class='fl'>NA</span>,    <span class='fl'>58842</span>,
  <span class='st'>"Q3"</span>,      <span class='fl'>NA</span>,    <span class='fl'>44568</span>,
  <span class='st'>"Q4"</span>,      <span class='fl'>NA</span>,    <span class='fl'>50197</span>,
  <span class='st'>"Q1"</span>,    <span class='fl'>2002</span>,    <span class='fl'>39113</span>,
  <span class='st'>"Q2"</span>,      <span class='fl'>NA</span>,    <span class='fl'>41668</span>,
  <span class='st'>"Q3"</span>,      <span class='fl'>NA</span>,    <span class='fl'>30144</span>,
  <span class='st'>"Q4"</span>,      <span class='fl'>NA</span>,    <span class='fl'>52897</span>,
  <span class='st'>"Q1"</span>,    <span class='fl'>2004</span>,    <span class='fl'>32129</span>,
  <span class='st'>"Q2"</span>,      <span class='fl'>NA</span>,    <span class='fl'>67686</span>,
  <span class='st'>"Q3"</span>,      <span class='fl'>NA</span>,    <span class='fl'>31768</span>,
  <span class='st'>"Q4"</span>,      <span class='fl'>NA</span>,    <span class='fl'>49094</span>
)

<span class='co'># `fill()` defaults to replacing missing data from top to bottom</span>
<span class='no'>sales</span> <span class='kw'>%&gt;%</span> <span class='fu'>fill</span>(<span class='no'>year</span>)</div><div class='output co'>#&gt; # A tibble: 16 x 3
#&gt;    quarter  year sales
#&gt;    &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1 Q1       2000 66013
#&gt;  2 Q2       2000 69182
#&gt;  3 Q3       2000 53175
#&gt;  4 Q4       2000 21001
#&gt;  5 Q1       2001 46036
#&gt;  6 Q2       2001 58842
#&gt;  7 Q3       2001 44568
#&gt;  8 Q4       2001 50197
#&gt;  9 Q1       2002 39113
#&gt; 10 Q2       2002 41668
#&gt; 11 Q3       2002 30144
#&gt; 12 Q4       2002 52897
#&gt; 13 Q1       2004 32129
#&gt; 14 Q2       2004 67686
#&gt; 15 Q3       2004 31768
#&gt; 16 Q4       2004 49094</div><div class='input'>
<span class='co'># Value (pet_type) is missing above</span>
<span class='no'>tidy_pets</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>tibble</span><span class='kw ns'>::</span><span class='fu'><a href='https://tibble.tidyverse.org/reference/tribble.html'>tribble</a></span>(
  ~<span class='no'>rank</span>, ~<span class='no'>pet_type</span>, ~<span class='no'>breed</span>,
  <span class='fl'>1L</span>,        <span class='fl'>NA</span>,    <span class='st'>"Boston Terrier"</span>,
  <span class='fl'>2L</span>,        <span class='fl'>NA</span>,    <span class='st'>"Retrievers (Labrador)"</span>,
  <span class='fl'>3L</span>,        <span class='fl'>NA</span>,    <span class='st'>"Retrievers (Golden)"</span>,
  <span class='fl'>4L</span>,        <span class='fl'>NA</span>,    <span class='st'>"French Bulldogs"</span>,
  <span class='fl'>5L</span>,        <span class='fl'>NA</span>,    <span class='st'>"Bulldogs"</span>,
  <span class='fl'>6L</span>,     <span class='st'>"Dog"</span>,    <span class='st'>"Beagles"</span>,
  <span class='fl'>1L</span>,        <span class='fl'>NA</span>,    <span class='st'>"Persian"</span>,
  <span class='fl'>2L</span>,        <span class='fl'>NA</span>,    <span class='st'>"Maine Coon"</span>,
  <span class='fl'>3L</span>,        <span class='fl'>NA</span>,    <span class='st'>"Ragdoll"</span>,
  <span class='fl'>4L</span>,        <span class='fl'>NA</span>,    <span class='st'>"Exotic"</span>,
  <span class='fl'>5L</span>,        <span class='fl'>NA</span>,    <span class='st'>"Siamese"</span>,
  <span class='fl'>6L</span>,     <span class='st'>"Cat"</span>,    <span class='st'>"American Short"</span>
)

<span class='co'># For values that are missing above you can use `.direction = "up"`</span>
<span class='no'>tidy_pets</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>fill</span>(<span class='no'>pet_type</span>, <span class='kw'>.direction</span> <span class='kw'>=</span> <span class='st'>"up"</span>)</div><div class='output co'>#&gt; # A tibble: 12 x 3
#&gt;     rank pet_type breed                
#&gt;    &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;                
#&gt;  1     1 Dog      Boston Terrier       
#&gt;  2     2 Dog      Retrievers (Labrador)
#&gt;  3     3 Dog      Retrievers (Golden)  
#&gt;  4     4 Dog      French Bulldogs      
#&gt;  5     5 Dog      Bulldogs             
#&gt;  6     6 Dog      Beagles              
#&gt;  7     1 Cat      Persian              
#&gt;  8     2 Cat      Maine Coon           
#&gt;  9     3 Cat      Ragdoll              
#&gt; 10     4 Cat      Exotic               
#&gt; 11     5 Cat      Siamese              
#&gt; 12     6 Cat      American Short       </div><div class='input'>
<span class='co'># Value (n_squirrels) is missing above and below within a group</span>
<span class='no'>squirrels</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>tibble</span><span class='kw ns'>::</span><span class='fu'><a href='https://tibble.tidyverse.org/reference/tribble.html'>tribble</a></span>(
  ~<span class='no'>group</span>,    ~<span class='no'>name</span>,     ~<span class='no'>role</span>,     ~<span class='no'>n_squirrels</span>,
  <span class='fl'>1</span>,      <span class='st'>"Sam"</span>,    <span class='st'>"Observer"</span>,   <span class='fl'>NA</span>,
  <span class='fl'>1</span>,     <span class='st'>"Mara"</span>, <span class='st'>"Scorekeeper"</span>,    <span class='fl'>8</span>,
  <span class='fl'>1</span>,    <span class='st'>"Jesse"</span>,    <span class='st'>"Observer"</span>,   <span class='fl'>NA</span>,
  <span class='fl'>1</span>,      <span class='st'>"Tom"</span>,    <span class='st'>"Observer"</span>,   <span class='fl'>NA</span>,
  <span class='fl'>2</span>,     <span class='st'>"Mike"</span>,    <span class='st'>"Observer"</span>,   <span class='fl'>NA</span>,
  <span class='fl'>2</span>,  <span class='st'>"Rachael"</span>,    <span class='st'>"Observer"</span>,   <span class='fl'>NA</span>,
  <span class='fl'>2</span>,  <span class='st'>"Sydekea"</span>, <span class='st'>"Scorekeeper"</span>,   <span class='fl'>14</span>,
  <span class='fl'>2</span>, <span class='st'>"Gabriela"</span>,    <span class='st'>"Observer"</span>,   <span class='fl'>NA</span>,
  <span class='fl'>3</span>,  <span class='st'>"Derrick"</span>,    <span class='st'>"Observer"</span>,   <span class='fl'>NA</span>,
  <span class='fl'>3</span>,     <span class='st'>"Kara"</span>, <span class='st'>"Scorekeeper"</span>,    <span class='fl'>9</span>,
  <span class='fl'>3</span>,    <span class='st'>"Emily"</span>,    <span class='st'>"Observer"</span>,   <span class='fl'>NA</span>,
  <span class='fl'>3</span>, <span class='st'>"Danielle"</span>,    <span class='st'>"Observer"</span>,   <span class='fl'>NA</span>
)

<span class='co'># The values are inconsistently missing by position within the group</span>
<span class='co'># Use .direction = "downup" to fill missing values in both directions</span>
<span class='no'>squirrels</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>group</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>fill</span>(<span class='no'>n_squirrels</span>, <span class='kw'>.direction</span> <span class='kw'>=</span> <span class='st'>"downup"</span>) <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span>()</div><div class='output co'>#&gt; # A tibble: 12 x 4
#&gt;    group name     role        n_squirrels
#&gt;    &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;             &lt;dbl&gt;
#&gt;  1     1 Sam      Observer              8
#&gt;  2     1 Mara     Scorekeeper           8
#&gt;  3     1 Jesse    Observer              8
#&gt;  4     1 Tom      Observer              8
#&gt;  5     2 Mike     Observer             14
#&gt;  6     2 Rachael  Observer             14
#&gt;  7     2 Sydekea  Scorekeeper          14
#&gt;  8     2 Gabriela Observer             14
#&gt;  9     3 Derrick  Observer              9
#&gt; 10     3 Kara     Scorekeeper           9
#&gt; 11     3 Emily    Observer              9
#&gt; 12     3 Danielle Observer              9</div><div class='input'>
# Using `.direction = "updown"` accomplishes the same goal in this example
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="tidyverse">
  <p>tidyr is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, Lionel Henry.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>

      </footer>
   </div>

  


  </body>
</html>


