<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Legacy versions of <code>nest()</code> and <code>unnest()</code> — nest_legacy • tidyr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">



<meta property="og:title" content="Legacy versions of <code>nest()</code> and <code>unnest()</code> — nest_legacy" />

<meta property="og:description" content="tidyr 1.0.0 introduced a new syntax for nest() and unnest(). The majority
of existing usage should be automatically translated to the new syntax with a
warning. However, if you need to quickly roll back to the previous behaviour,
these functions provide the previous interface. To make old code work as is,
add the following code to the top of your script:library(tidyr)
nest &amp;lt;- nest_legacy
unnest &amp;lt;- unnest_legacy
" />

<meta property="og:image" content="https://tidyr.tidyverse.org/logo.png" />
<meta name="twitter:card" content="summary" />

<meta name="robots" content="noindex">

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-115082821-1');
</script>
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">tidyr</a>
        <div class="info">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.8.3.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/tidy-data.html">Tidy data</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/nest.html">Nested data</a>
    </li>
    <li>
      <a href="../articles/pivot.html">Pivoting</a>
    </li>
    <li>
      <a href="../articles/rectangle.html">Rectangling</a>
    </li>
    <li>
      <a href="../articles/tidy-data.html">Tidy data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/tidyverse/tidyr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Legacy versions of <code>nest()</code> and <code>unnest()</code></h1>
    <small class="dont-index">Source: <a href='https://github.com/tidyverse/tidyr/blob/master/R/nest-legacy.R'><code>R/nest-legacy.R</code></a></small>
    <div class="hidden name"><code>nest_legacy.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>tidyr 1.0.0 introduced a new syntax for <code><a href='nest.html'>nest()</a></code> and <code><a href='nest.html'>unnest()</a></code>. The majority
of existing usage should be automatically translated to the new syntax with a
warning. However, if you need to quickly roll back to the previous behaviour,
these functions provide the previous interface. To make old code work as is,
add the following code to the top of your script:</p><pre>library(tidyr)
nest &lt;- nest_legacy
unnest &lt;- unnest_legacy
</pre>
    
    </div>

    <pre class="usage"><span class='fu'>nest_legacy</span>(<span class='no'>data</span>, <span class='no'>...</span>, <span class='kw'>.key</span> <span class='kw'>=</span> <span class='st'>"data"</span>)

<span class='fu'>unnest_legacy</span>(<span class='no'>data</span>, <span class='no'>...</span>, <span class='kw'>.drop</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>.id</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>.sep</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>.preserve</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Specification of columns to unnest. Use bare variable names or
functions of variables. If omitted, defaults to all list-cols.</p></td>
    </tr>
    <tr>
      <th>.key</th>
      <td><p>The name of the new column, as a string or symbol. This argument
is passed by expression and supports
<a href='https://rlang.r-lib.org/reference/quasiquotation.html'>quasiquotation</a> (you can unquote strings and
symbols). The name is captured from the expression with <code><a href='https://rlang.r-lib.org/reference/quotation.html'>rlang::ensym()</a></code>
(note that this kind of interface where symbols do not represent actual
objects is now discouraged in the tidyverse; we support it here for
backward compatibility).</p></td>
    </tr>
    <tr>
      <th>.drop</th>
      <td><p>Should additional list columns be dropped? By default,
<code><a href='nest.html'>unnest()</a></code> will drop them if unnesting the specified columns requires the
rows to be duplicated.</p></td>
    </tr>
    <tr>
      <th>.id</th>
      <td><p>Data frame identifier - if supplied, will create a new column with
name <code>.id</code>, giving a unique identifier. This is most useful if the list
column is named.</p></td>
    </tr>
    <tr>
      <th>.sep</th>
      <td><p>If non-<code>NULL</code>, the names of unnested data frame columns will
combine the name of the original list-col with the names from the nested
data frame, separated by <code>.sep</code>.</p></td>
    </tr>
    <tr>
      <th>.preserve</th>
      <td><p>Optionally, list-columns to preserve in the output. These
will be duplicated in the same way as atomic vectors. This has
<code><a href='https://dplyr.tidyverse.org/reference/select.html'>dplyr::select()</a></code> semantics so you can preserve multiple variables with
<code>.preserve = c(x, y)</code> or <code>.preserve = starts_with("list")</code>.</p></td>
    </tr>
    </table>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Nest and unnest are inverses</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>2</span>), <span class='kw'>y</span> <span class='kw'>=</span> <span class='fl'>3</span>:<span class='fl'>1</span>)
<span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'>nest_legacy</span>(<span class='no'>y</span>)</div><div class='output co'>#&gt; # A tibble: 2 x 2
#&gt;       x data            
#&gt;   &lt;dbl&gt; &lt;list&gt;          
#&gt; 1     1 &lt;tibble [2 × 1]&gt;
#&gt; 2     2 &lt;tibble [1 × 1]&gt;</div><div class='input'><span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'>nest_legacy</span>(<span class='no'>y</span>) <span class='kw'>%&gt;%</span> <span class='fu'>unnest_legacy</span>()</div><div class='output co'>#&gt; # A tibble: 3 x 2
#&gt;       x     y
#&gt;   &lt;dbl&gt; &lt;int&gt;
#&gt; 1     1     3
#&gt; 2     1     2
#&gt; 3     2     1</div><div class='input'>
<span class='co'># nesting -------------------------------------------------------------------</span>
<span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span>(<span class='no'>iris</span>) <span class='kw'>%&gt;%</span> <span class='fu'>nest_legacy</span>(-<span class='no'>Species</span>)</div><div class='output co'>#&gt; # A tibble: 3 x 2
#&gt;   Species    data             
#&gt;   &lt;fct&gt;      &lt;list&gt;           
#&gt; 1 setosa     &lt;tibble [50 × 4]&gt;
#&gt; 2 versicolor &lt;tibble [50 × 4]&gt;
#&gt; 3 virginica  &lt;tibble [50 × 4]&gt;</div><div class='input'><span class='fu'><a href='https://tibble.tidyverse.org/reference/as_tibble.html'>as_tibble</a></span>(<span class='no'>chickwts</span>) <span class='kw'>%&gt;%</span> <span class='fu'>nest_legacy</span>(<span class='no'>weight</span>)</div><div class='output co'>#&gt; # A tibble: 6 x 2
#&gt;   feed      data             
#&gt;   &lt;fct&gt;     &lt;list&gt;           
#&gt; 1 horsebean &lt;tibble [10 × 1]&gt;
#&gt; 2 linseed   &lt;tibble [12 × 1]&gt;
#&gt; 3 soybean   &lt;tibble [14 × 1]&gt;
#&gt; 4 sunflower &lt;tibble [12 × 1]&gt;
#&gt; 5 meatmeal  &lt;tibble [11 × 1]&gt;
#&gt; 6 casein    &lt;tibble [12 × 1]&gt;</div><div class='input'>
<span class='co'># unnesting -----------------------------------------------------------------</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span>(
  <span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>2</span>,
  <span class='kw'>y</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(
    <span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fl'>1</span>),
    <span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span>(<span class='kw'>z</span> <span class='kw'>=</span> <span class='fl'>3</span>:<span class='fl'>4</span>)
  )
)
<span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'>unnest_legacy</span>(<span class='no'>y</span>)</div><div class='output co'>#&gt; # A tibble: 3 x 2
#&gt;       x     z
#&gt;   &lt;int&gt; &lt;dbl&gt;
#&gt; 1     1     1
#&gt; 2     2     3
#&gt; 3     2     4</div><div class='input'>
<span class='co'># You can also unnest multiple columns simultaneously</span>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span>(
  <span class='kw'>a</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"a"</span>, <span class='st'>"b"</span>), <span class='st'>"c"</span>),
  <span class='kw'>b</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/list'>list</a></span>(<span class='fl'>1</span>:<span class='fl'>2</span>, <span class='fl'>3</span>),
  <span class='kw'>c</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>11</span>, <span class='fl'>22</span>)
)
<span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'>unnest_legacy</span>(<span class='no'>a</span>, <span class='no'>b</span>)</div><div class='output co'>#&gt; # A tibble: 3 x 3
#&gt;       c a         b
#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
#&gt; 1    11 a         1
#&gt; 2    11 b         2
#&gt; 3    22 c         3</div><div class='input'><span class='co'># If you omit the column names, it'll unnest all list-cols</span>
<span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'>unnest_legacy</span>()</div><div class='output co'>#&gt; # A tibble: 3 x 3
#&gt;       c a         b
#&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;
#&gt; 1    11 a         1
#&gt; 2    11 b         2
#&gt; 3    22 c         3</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
            
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="tidyverse">
  <p>tidyr is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, Lionel Henry.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>
      </footer>
   </div>

  

  </body>
</html>

