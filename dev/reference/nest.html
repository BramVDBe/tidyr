<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Nest repeated values in a list-column of data frames — nest • tidyr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>
<link href="../tidyverse-2.css" rel="stylesheet">



<meta property="og:title" content="Nest repeated values in a list-column of data frames — nest" />

<meta property="og:description" content="Nesting is implicitly a summarising operation: you get one row defined
by the grouping defined by the non-nested columns. This is useful in
conjunction with other summaries that work with whole datasets, most
notably models, as described in https://r4ds.had.co.nz/many-models.html.
Learn more in vignette(&quot;nesting&quot;)." />

<meta property="og:image" content="https://tidyr.tidyverse.org/logo.png" />
<meta name="twitter:card" content="summary" />

<meta name="robots" content="noindex">

<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<!-- google analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-115082821-1');
</script>
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">tidyr</a>
        <div class="info">
          <span class="partof">part of the <a href="https://tidyverse.org">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.8.3.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/tidy-data.html">Tidy data</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/pivot.html">Pivoting</a>
    </li>
    <li>
      <a href="../articles/tidy-data.html">Tidy data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/tidyverse/tidyr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Nest repeated values in a list-column of data frames</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidyverse/tidyr/blob/master/R/nest.R'><code>R/nest.R</code></a></small>
    <div class="hidden name"><code>nest.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Nesting is implicitly a summarising operation: you get one row defined
by the grouping defined by the non-nested columns. This is useful in
conjunction with other summaries that work with whole datasets, most
notably models, as described in <a href='https://r4ds.had.co.nz/many-models.html'>https://r4ds.had.co.nz/many-models.html</a>.</p>
<p>Learn more in <code>vignette("nesting")</code>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>nest</span>(<span class='no'>.data</span>, <span class='no'>...</span>, <span class='kw'>.key</span> <span class='kw'>=</span> <span class='st'>"DEPRECATED"</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.data</th>
      <td><p>A data frame.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Name-variable pairs of the form <code>new_col = c(col1, col2, col3)</code>,
that describe how you wish to nest existing columns into new columns.
The right hand side can be any expression supported by tidyselect.</p>
<p><strong>Deprecated</strong>: previously you could write <code>df %&gt;% nest(x, y, z)</code>,
now you should rewrite this as <code>df %&gt;% nest(data = c(x, y, z))</code>.</p></td>
    </tr>
    <tr>
      <th>.key</th>
      <td><p><strong>Deprecated</strong>: No longer needed because of the updated <code>...</code>
syntax.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="grouped-data-frames"><a class="anchor" href="#grouped-data-frames"></a>Grouped data frames</h2>

    
    <p><code>nest()</code> specify the columns to be nested; i.e. the columns that will appear
in the inner data frame. Alternatively, you <code>nest()</code> a grouped data frame
created by <code><a href='https://dplyr.tidyverse.org/reference/group_by.html'>dplyr::group_by()</a></code>. Here the grouping variables will remain
in the outer data frame, and all other variables will go into the inner
data frame. The result will be an ungrouped tibble, where each row
represents a group in the input.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='unnest.html'>unnest()</a></code> for the inverse operation.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>2</span>, <span class='fl'>3</span>), <span class='kw'>y</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>6</span>, <span class='kw'>z</span> <span class='kw'>=</span> <span class='fl'>6</span>:<span class='fl'>1</span>)
<span class='co'># Note that we get one row of output for each unique combination of</span>
<span class='co'># non-chopped variables</span>
<span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'>nest</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='no'>y</span>, <span class='no'>z</span>))</div><div class='output co'>#&gt; # A tibble: 3 x 2
#&gt;       x             data
#&gt;   &lt;dbl&gt;   &lt;list&lt;df[,2]&gt;&gt;
#&gt; 1     1 1, 2, 3, 6, 5, 4
#&gt; 2     2       4, 5, 3, 2
#&gt; 3     3             6, 1</div><div class='input'><span class='co'># cf nest</span>
<span class='no'>df</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='chop.html'>chop</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='no'>y</span>, <span class='no'>z</span>))</div><div class='output co'>#&gt; # A tibble: 3 x 3
#&gt;       x y         z        
#&gt;   &lt;dbl&gt; &lt;list&gt;    &lt;list&gt;   
#&gt; 1     1 &lt;int [3]&gt; &lt;int [3]&gt;
#&gt; 2     2 &lt;int [2]&gt; &lt;int [2]&gt;
#&gt; 3     3 &lt;int [1]&gt; &lt;int [1]&gt;</div><div class='input'>
<span class='no'>iris</span> <span class='kw'>%&gt;%</span> <span class='fu'>nest</span>(<span class='kw'>data</span> <span class='kw'>=</span> -<span class='no'>Species</span>)</div><div class='output co'>#&gt; # A tibble: 3 x 2
#&gt;   Species
#&gt;   &lt;fct&gt;  
#&gt; 1 setosa 
#&gt; 2 versic…
#&gt; 3 virgin…
#&gt; # … with 1 more variable: data &lt;list&lt;df[,4]&gt;&gt;</div><div class='input'><span class='no'>chickwts</span> <span class='kw'>%&gt;%</span> <span class='fu'>nest</span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>weight</span>)</div><div class='output co'>#&gt; # A tibble: 6 x 2
#&gt;   feed                                                                      data
#&gt;   &lt;fct&gt;                                                           &lt;list&lt;df[,1]&gt;&gt;
#&gt; 1 horsebean                     179, 160, 136, 227, 217, 168, 108, 124, 143, 140
#&gt; 2 linseed             309, 229, 181, 141, 260, 203, 148, 169, 213, 257, 244, 271
#&gt; 3 soybean   243, 230, 248, 327, 329, 250, 193, 271, 316, 267, 199, 171, 158, 248
#&gt; 4 sunflower           423, 340, 392, 339, 341, 226, 320, 295, 334, 322, 297, 318
#&gt; 5 meatmeal                 325, 257, 303, 315, 380, 153, 263, 242, 206, 344, 258
#&gt; 6 casein              368, 390, 379, 260, 404, 318, 352, 359, 216, 222, 283, 332</div><div class='input'>
<span class='co'># Nesting a grouped data frame nests all variables apart from the group vars</span>
<span class='no'>fish_encounters</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>fish</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>nest</span>()</div><div class='output co'>#&gt; # A tibble: 19 x 2
#&gt;    fish                                                                data
#&gt;    &lt;fct&gt;                                                     &lt;list&lt;df[,2]&gt;&gt;
#&gt;  1 4842  1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1
#&gt;  2 4843  1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1
#&gt;  3 4844  1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1
#&gt;  4 4845                                        1, 2, 3, 4, 5, 1, 1, 1, 1, 1
#&gt;  5 4847                                                    1, 2, 3, 1, 1, 1
#&gt;  6 4848                                              1, 2, 3, 4, 1, 1, 1, 1
#&gt;  7 4849                                                          1, 2, 1, 1
#&gt;  8 4850                                  1, 2, 4, 5, 6, 7, 1, 1, 1, 1, 1, 1
#&gt;  9 4851                                                          1, 2, 1, 1
#&gt; 10 4854                                                          1, 2, 1, 1
#&gt; 11 4855                                        1, 2, 3, 4, 5, 1, 1, 1, 1, 1
#&gt; 12 4857                1, 2, 3, 4, 5, 6, 7, 8, 9, 1, 1, 1, 1, 1, 1, 1, 1, 1
#&gt; 13 4858  1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1
#&gt; 14 4859                                        1, 2, 3, 4, 5, 1, 1, 1, 1, 1
#&gt; 15 4861  1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1
#&gt; 16 4862                1, 2, 3, 4, 5, 6, 7, 8, 9, 1, 1, 1, 1, 1, 1, 1, 1, 1
#&gt; 17 4863                                                          1, 2, 1, 1
#&gt; 18 4864                                                          1, 2, 1, 1
#&gt; 19 4865                                                    1, 2, 3, 1, 1, 1</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#grouped-data-frames">Grouped data frames</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="tidyverse">
  <p>tidyr is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, Lionel Henry.
    Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.
  </p>
</div>
      </footer>
   </div>

  

  </body>
</html>

