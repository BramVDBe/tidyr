<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • tidyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="../tidyverse.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../tidyverse-2.css" rel="stylesheet"><!--optional theme--><link href="../.css" rel="stylesheet"><meta property="og:title" content="Changelog"><meta property="og:image" content="https://tidyr.tidyverse.org/logo.png"><meta name="twitter:card" content="summary"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">tidyr</a>
        <div class="info hidden-xs hidden-sm">
          <span class="partof">part of the <a href="https://tidyverse.org" class="external-link">tidyverse</a></span>
          <span class="version version-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.1.4.9000</span>
        </div>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right"><li>
  <a href="../articles/tidy-data.html">Tidy data</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/pivot.html">Pivoting</a>
    </li>
    <li>
      <a href="../articles/rectangle.html">Rectangling</a>
    </li>
    <li>
      <a href="../articles/nest.html">Nested data</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/index.html">More articles...</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Releases</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2020/05/tidyr-1.1.0/" class="external-link">Version 1.1.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/09/tidyr-1-0-0/" class="external-link">Version 1.0.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/02/tidyr-0-8-0/" class="external-link">Version 0.8.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2017/08/tidyr-0.7.0/" class="external-link">Version 0.7.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2016/08/15/tidyr-0-6-0/" class="external-link">Version 0.6.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2016/06/13/tidyr-0-5-0/" class="external-link">Version 0.5.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2016/02/02/tidyr-0-4-0/" class="external-link">Version 0.5.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2015/09/13/tidyr-0-3-0/" class="external-link">Version 0.4.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2014/12/08/tidyr-0-2-0/" class="external-link">Version 0.2.0</a>
    </li>
    <li>
      <a href="https://blog.rstudio.com/2014/07/22/introducing-tidyr/" class="external-link">Version 0.1.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul></li>
        <li>
  <a href="https://github.com/tidyverse/tidyr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/tidyverse/tidyr/blob/HEAD/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="development version" id="tidyr-development-version">tidyr (development version)<a class="anchor" aria-label="anchor" href="#tidyr-development-version"></a></h2>
<ul><li><p>@mgirlich is now a tidyr author in recognition of his significant and sustained contributions.</p></li>
<li><p><code><a href="../reference/hoist.html">hoist()</a></code> no longer accidentally removes elements that have duplicated names (<a href="https://github.com/tidyverse/tidyr/issues/1259" class="external-link">#1259</a>).</p></li>
<li><p><code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> no longer accidentally retains <code>values_from</code> when pivoting a zero row data frame (<a href="https://github.com/tidyverse/tidyr/issues/1249" class="external-link">#1249</a>).</p></li>
<li><p><code><a href="../reference/pivot_wider_spec.html">pivot_wider_spec()</a></code> now works correctly with a 0-row data frame and a <code>spec</code> that doesn’t identify any rows (<a href="https://github.com/tidyverse/tidyr/issues/1250" class="external-link">#1250</a>, <a href="https://github.com/tidyverse/tidyr/issues/1252" class="external-link">#1252</a>).</p></li>
<li><p><code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> now throws a more informative error when <code>values_fn</code> doesn’t result in a single summary value (<a href="https://github.com/tidyverse/tidyr/issues/1238" class="external-link">#1238</a>).</p></li>
<li><p><code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> now correctly handles the case where an id column name collides with a value from <code>names_from</code> (<a href="https://github.com/tidyverse/tidyr/issues/1107" class="external-link">#1107</a>).</p></li>
<li><p><code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> and <code><a href="../reference/pivot_longer.html">pivot_longer()</a></code> now both check that the spec columns <code>.name</code> and <code>.value</code> are character vectors. Additionally, the <code>.name</code> column must be unique (<a href="https://github.com/tidyverse/tidyr/issues/1107" class="external-link">#1107</a>).</p></li>
<li><p>The <code>names_from</code> and <code>values_from</code> arguments to <code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> are now required if their default values of <code>name</code> and <code>value</code> don’t correspond to columns in <code>data</code>. Additionally, they must identify at least 1 column in <code>data</code> (<a href="https://github.com/tidyverse/tidyr/issues/1240" class="external-link">#1240</a>).</p></li>
<li><p>The <code>names_ptypes</code> argument of <code><a href="../reference/pivot_longer.html">pivot_longer()</a></code> is now applied after <code>names_transform</code> for consistency with the rectangling functions (i.e. <code><a href="../reference/hoist.html">hoist()</a></code>) (<a href="https://github.com/tidyverse/tidyr/issues/1233" class="external-link">#1233</a>).</p></li>
<li><p><code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> and <code><a href="../reference/pivot_longer.html">pivot_longer()</a></code> now generate more informative errors related to name repair (<a href="https://github.com/tidyverse/tidyr/issues/987" class="external-link">#987</a>).</p></li>
<li><p>The <code>values_fn</code> argument of <code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> now correctly allows anonymous functions (<a href="https://github.com/tidyverse/tidyr/issues/1114" class="external-link">#1114</a>).</p></li>
<li>
<p>A number of bugs have been fixed for the grid functions, <code><a href="../reference/expand_grid.html">expand_grid()</a></code>, <code><a href="../reference/expand.html">nesting()</a></code>, <code><a href="../reference/expand.html">crossing()</a></code>, and <code><a href="../reference/expand.html">expand()</a></code>:</p>
<ul><li><p>Automatically named input now has unique name repair applied to it silently. This avoids a number of issues resulting from duplicate truncated names (<a href="https://github.com/tidyverse/tidyr/issues/1116" class="external-link">#1116</a>, <a href="https://github.com/tidyverse/tidyr/issues/1221" class="external-link">#1221</a>, <a href="https://github.com/tidyverse/tidyr/issues/1092" class="external-link">#1092</a>, <a href="https://github.com/tidyverse/tidyr/issues/1037" class="external-link">#1037</a>, <a href="https://github.com/tidyverse/tidyr/issues/992" class="external-link">#992</a>).</p></li>
<li><p>Columns from unnamed data frames can now be used in expressions after that data frame was specified, like <code>expand_grid(tibble(x = 1), y = x)</code>. This is more consistent with how <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble()</a></code> behaves.</p></li>
<li><p>Supplying data frames with 0 columns but &gt;0 rows now works correctly (<a href="https://github.com/tidyverse/tidyr/issues/1189" class="external-link">#1189</a>).</p></li>
<li><p><code><a href="../reference/expand_grid.html">expand_grid()</a></code>, <code><a href="../reference/expand.html">expand()</a></code>, <code><a href="../reference/expand.html">nesting()</a></code>, and <code><a href="../reference/expand.html">crossing()</a></code> now return a 1 row data frame when no inputs are supplied, which is more consistent with <code>prod() == 1L</code> and the idea that computations involving the number of combinations computed from an empty set should return 1 (<a href="https://github.com/tidyverse/tidyr/issues/1258" class="external-link">#1258</a>).</p></li>
</ul></li>
<li>
<p><code><a href="../reference/drop_na.html">drop_na()</a></code> has been updated to utilize <code><a href="https://vctrs.r-lib.org/reference/vec_detect_complete.html" class="external-link">vctrs::vec_detect_complete()</a></code>. This has resulted in the following changes:</p>
<ul><li><p>Using a tidyselect expression that results in 0 columns being selected no longer drops missing values from all columns (<a href="https://github.com/tidyverse/tidyr/issues/1227" class="external-link">#1227</a>).</p></li>
<li><p>For list-columns, empty atomic elements like <code>integer(0)</code> are no longer dropped. The only value that is dropped in a list-column is <code>NULL</code> (<a href="https://github.com/tidyverse/tidyr/issues/1228" class="external-link">#1228</a>).</p></li>
<li><p>Missing values can now be detected in a wider variety of column types, including data frame columns and the rcrd type from vctrs.</p></li>
</ul></li>
<li>
<p><code><a href="../reference/replace_na.html">replace_na()</a></code> has been updated to utilize vctrs. This has resulted in the following changes:</p>
<ul><li><p>The type of <code>data</code> can no longer change when the replacement is applied. <code>replace</code> will now always be cast to the type of <code>data</code> before the replacement is made. For example, this means that using a replacement value of <code>1.5</code> on an integer column is no longer allowed. Similarly, replacing missing values in a list-column must now be done with <code>list("foo")</code> rather than just <code>"foo"</code>.</p></li>
<li><p>For list-columns, empty atomic elements like <code>integer(0)</code> are no longer replaced. The only value that is replaced in a list-column is <code>NULL</code> (<a href="https://github.com/tidyverse/tidyr/issues/1168" class="external-link">#1168</a>).</p></li>
<li><p>Replacements can now be done on a much larger variety of types and columns, including data frame columns and the rcrd type from vctrs.</p></li>
</ul><p>Note that in general <code><a href="../reference/replace_na.html">replace_na()</a></code> is considered to be superseded in favor of a combination of <code><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">dplyr::across()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/coalesce.html" class="external-link">dplyr::coalesce()</a></code>, which also allows you to utilize tidyselect.</p>
</li>
<li>
<p><code><a href="../reference/fill.html">fill()</a></code> is now backed by <code><a href="https://vctrs.r-lib.org/reference/vec_fill_missing.html" class="external-link">vctrs::vec_fill_missing()</a></code>, which provides a more comprehensive method for filling different types of missing values. This results in the following improvements:</p>
<ul><li><p><code><a href="../reference/fill.html">fill()</a></code> can now handle lubridate’s Period types (<a href="https://github.com/tidyverse/tidyr/issues/1094" class="external-link">#1094</a>).</p></li>
<li><p><code><a href="../reference/fill.html">fill()</a></code> can now handle data frame columns and the rcrd type from vctrs.</p></li>
<li><p><code><a href="../reference/fill.html">fill()</a></code> now treats <code>NaN</code> like any other missing value (<a href="https://github.com/tidyverse/tidyr/issues/982" class="external-link">#982</a>).</p></li>
</ul></li>
<li><p><code><a href="../reference/pack.html">unpack()</a></code> now silently skips over any non-data frame columns specified by <code>cols</code>. This matches the existing behavior of <code><a href="../reference/chop.html">unchop()</a></code> and <code><a href="../reference/nest.html">unnest()</a></code> (<a href="https://github.com/tidyverse/tidyr/issues/1153" class="external-link">#1153</a>).</p></li>
<li><p><code><a href="../reference/pack.html">unpack()</a></code> no longer drops empty columns specified through <code>cols</code> (<a href="https://github.com/tidyverse/tidyr/issues/1191" class="external-link">#1191</a>).</p></li>
<li>
<p>The rectangling tools, <code><a href="../reference/hoist.html">hoist()</a></code>, <code><a href="../reference/hoist.html">unnest_wider()</a></code>, and <code><a href="../reference/hoist.html">unnest_longer()</a></code>, have undergone a complete rewrite. This has fixed many edge case bugs, and has added the following new features:</p>
<ul><li><p><code><a href="../reference/hoist.html">unnest_wider()</a></code> and <code><a href="../reference/hoist.html">unnest_longer()</a></code> can now unnest multiple columns at once (<a href="https://github.com/tidyverse/tidyr/issues/740" class="external-link">#740</a>).</p></li>
<li><p>The <code>indices_to</code> and <code>values_to</code> arguments to <code><a href="../reference/hoist.html">unnest_longer()</a></code> now accept a glue specification, which is useful when unnesting multiple columns.</p></li>
<li><p>If a <code>ptype</code> is supplied, but that column can’t be simplified, the result will be a list-of column where each element has type <code>ptype</code> (<a href="https://github.com/tidyverse/tidyr/issues/998" class="external-link">#998</a>).</p></li>
<li><p><code>simplify</code> now accepts a named list of <code>TRUE</code> or <code>FALSE</code> to control simplification on a per column basis (<a href="https://github.com/tidyverse/tidyr/issues/995" class="external-link">#995</a>).</p></li>
<li><p><code><a href="../reference/hoist.html">unnest_wider()</a></code> has a new <code>strict</code> argument which controls whether or not strict vctrs typing rules should be applied. It defaults to <code>FALSE</code> for backwards compatibility, and because it is often more useful to be lax when unnesting JSON, which doesn’t always map one-to-one with R’s types (<a href="https://github.com/tidyverse/tidyr/issues/1125" class="external-link">#1125</a>).</p></li>
</ul></li>
<li><p><code><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">any_of()</a></code> and <code><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">all_of()</a></code> from tidyselect are now re-exported (<a href="https://github.com/tidyverse/tidyr/issues/1217" class="external-link">#1217</a>).</p></li>
<li><p><code><a href="../reference/chop.html">unchop()</a></code> now respects <code>ptype</code> when unnesting a non-list column (<a href="https://github.com/tidyverse/tidyr/issues/1211" class="external-link">#1211</a>).</p></li>
<li><p>The <code><a href="../reference/nest.html">nest()</a></code> generic now avoids computing on <code>.data</code>, making it more compatible with lazy tibbles (<a href="https://github.com/tidyverse/tidyr/issues/1134" class="external-link">#1134</a>).</p></li>
<li><p><code><a href="../reference/chop.html">chop()</a></code> now works correctly with data frames with 0 rows (<a href="https://github.com/tidyverse/tidyr/issues/1206" class="external-link">#1206</a>).</p></li>
<li><p>The <code>cols</code> argument of <code><a href="../reference/chop.html">chop()</a></code> is no longer optional. This matches the behavior of <code>cols</code> seen elsewhere in tidyr (<a href="https://github.com/tidyverse/tidyr/issues/1205" class="external-link">#1205</a>).</p></li>
<li><p><code><a href="../reference/pack.html">unpack()</a></code> now works correctly with data frame columns containing 1 row but 0 columns (<a href="https://github.com/tidyverse/tidyr/issues/1189" class="external-link">#1189</a>).</p></li>
<li><p>The <code>ptype</code> argument of <code><a href="../reference/nest.html">unnest()</a></code> now works as expected (<a href="https://github.com/tidyverse/tidyr/issues/1158" class="external-link">#1158</a>).</p></li>
<li><p>The <code>.names_sep</code> argument of the data.frame method for <code><a href="../reference/nest.html">nest()</a></code> is now actually used (<a href="https://github.com/tidyverse/tidyr/issues/1174" class="external-link">#1174</a>).</p></li>
<li><p>The default value for the <code>ptype</code> arguments of <code><a href="../reference/nest.html">unnest()</a></code> and <code><a href="../reference/chop.html">unchop()</a></code> has been changed from <code>NULL</code> to <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> to better match <code><a href="../reference/pivot_longer.html">pivot_longer()</a></code>, <code><a href="../reference/hoist.html">unnest_longer()</a></code>, and <code><a href="../reference/hoist.html">unnest_wider()</a></code> (<a href="https://github.com/tidyverse/tidyr/issues/1152" class="external-link">#1152</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.1.4" id="tidyr-114">tidyr 1.1.4<small>2021-09-27</small><a class="anchor" aria-label="anchor" href="#tidyr-114"></a></h2>
<ul><li><p><code><a href="../reference/expand_grid.html">expand_grid()</a></code> is now about twice as fast and <code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> is a bit faster (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/tidyr/issues/1130" class="external-link">#1130</a>).</p></li>
<li><p><code><a href="../reference/chop.html">unchop()</a></code> is now much faster, which propagates through to various functions, such as <code><a href="../reference/nest.html">unnest()</a></code>, <code><a href="../reference/hoist.html">unnest_longer()</a></code>, <code><a href="../reference/hoist.html">unnest_wider()</a></code>, and <code><a href="../reference/separate_rows.html">separate_rows()</a></code> (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/DavisVaughan" class="external-link">@DavisVaughan</a>, <a href="https://github.com/tidyverse/tidyr/issues/1127" class="external-link">#1127</a>).</p></li>
<li><p><code><a href="../reference/nest.html">unnest()</a></code> is now much faster (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/DavisVaughan" class="external-link">@DavisVaughan</a>, <a href="https://github.com/tidyverse/tidyr/issues/1127" class="external-link">#1127</a>).</p></li>
<li><p><code><a href="../reference/nest.html">unnest()</a></code> no longer allows unnesting a list-col containing a mix of vector and data frame elements. Previously, this only worked by accident, and is considered an off-label usage of <code><a href="../reference/nest.html">unnest()</a></code> that has now become an error.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.1.3" id="tidyr-113">tidyr 1.1.3<small>2021-03-03</small><a class="anchor" aria-label="anchor" href="#tidyr-113"></a></h2>
<ul><li><p>tidyr verbs no longer have “default” methods for lazyeval fallbacks. This means that you’ll get clearer error messages (<a href="https://github.com/tidyverse/tidyr/issues/1036" class="external-link">#1036</a>).</p></li>
<li><p><code><a href="../reference/uncount.html">uncount()</a></code> error for non-integer weights and gives a clearer error message for negative weights (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/tidyr/issues/1069" class="external-link">#1069</a>).</p></li>
<li><p>You can once again unnest dates (<a href="https://github.com/tidyverse/tidyr/issues/1021" class="external-link">#1021</a>, <a href="https://github.com/tidyverse/tidyr/issues/1089" class="external-link">#1089</a>).</p></li>
<li><p><code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> works with data.table and empty key variables (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/tidyr/issues/1066" class="external-link">#1066</a>).</p></li>
<li><p><code><a href="../reference/separate_rows.html">separate_rows()</a></code> works for factor columns (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/tidyr/issues/1058" class="external-link">#1058</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.1.2" id="tidyr-112">tidyr 1.1.2<small>2020-08-27</small><a class="anchor" aria-label="anchor" href="#tidyr-112"></a></h2>
<ul><li>
<code><a href="../reference/separate_rows.html">separate_rows()</a></code> returns to 1.1.0 behaviour for empty strings (<a href="https://github.com/rjpatm" class="external-link">@rjpatm</a>, <a href="https://github.com/tidyverse/tidyr/issues/1014" class="external-link">#1014</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.1.1" id="tidyr-111">tidyr 1.1.1<small>2020-07-31</small><a class="anchor" aria-label="anchor" href="#tidyr-111"></a></h2>
<ul><li><p>New tidyr logo!</p></li>
<li><p>stringi dependency has been removed; this was a substantial dependency that make tidyr hard to compile in resource constrained environments (<a href="https://github.com/rjpat" class="external-link">@rjpat</a>, <a href="https://github.com/tidyverse/tidyr/issues/936" class="external-link">#936</a>).</p></li>
<li><p>Replace Rcpp with cpp11. See <a href="https://cpp11.r-lib.org/articles/motivations.html" class="external-link uri">https://cpp11.r-lib.org/articles/motivations.html</a> for reasons why.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.1.0" id="tidyr-110">tidyr 1.1.0<small>2020-05-20</small><a class="anchor" aria-label="anchor" href="#tidyr-110"></a></h2>
<div class="section level3">
<h3 id="general-features-1-1-0">General features<a class="anchor" aria-label="anchor" href="#general-features-1-1-0"></a></h3>
<ul><li><p><code><a href="../reference/pivot_longer.html">pivot_longer()</a></code>, <code><a href="../reference/hoist.html">hoist()</a></code>, <code><a href="../reference/hoist.html">unnest_wider()</a></code>, and <code><a href="../reference/hoist.html">unnest_longer()</a></code> gain new <code>transform</code> arguments; these allow you to transform values “in flight”. They are partly needed because vctrs coercion rules have become stricter, but they give you greater flexibility than was available previously (<a href="https://github.com/tidyverse/tidyr/issues/921" class="external-link">#921</a>).</p></li>
<li><p>Arguments that use tidy selection syntax are now clearly documented and have been updated to use tidyselect 1.1.0 (<a href="https://github.com/tidyverse/tidyr/issues/872" class="external-link">#872</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="pivoting-improvements-1-1-0">Pivoting improvements<a class="anchor" aria-label="anchor" href="#pivoting-improvements-1-1-0"></a></h3>
<ul><li><p>Both <code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> and <code><a href="../reference/pivot_longer.html">pivot_longer()</a></code> are considerably more performant, thanks largely to improvements in the underlying vctrs code (<a href="https://github.com/tidyverse/tidyr/issues/790" class="external-link">#790</a>, <a href="https://github.com/DavisVaughan" class="external-link">@DavisVaughan</a>).</p></li>
<li>
<p><code><a href="../reference/pivot_longer.html">pivot_longer()</a></code> now supports <code>names_to = character()</code> which prevents the name column from being created (<a href="https://github.com/tidyverse/tidyr/issues/961" class="external-link">#961</a>).</p>
<pre class="{r}"><code><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, x_1 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, x_2 <span class="op">=</span> <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>  
<span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span><span class="op">-</span><span class="va">id</span>, names_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre>
</li>
<li><p><code><a href="../reference/pivot_longer.html">pivot_longer()</a></code> no longer creates a <code>.copy</code> variable in the presence of duplicate column names. This makes it more consistent with the handling of non-unique specs.</p></li>
<li>
<p><code><a href="../reference/pivot_longer.html">pivot_longer()</a></code> automatically disambiguates non-unique ouputs, which can occur when the input variables include some additional component that you don’t care about and want to discard (<a href="https://github.com/tidyverse/tidyr/issues/792" class="external-link">#792</a>, <a href="https://github.com/tidyverse/tidyr/issues/793" class="external-link">#793</a>).</p>
<pre class="{r}"><code><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, x_1 <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, x_2 <span class="op">=</span> <span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>  
<span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span><span class="op">-</span><span class="va">id</span>, names_pattern <span class="op">=</span> <span class="st">"(.)_."</span><span class="op">)</span>
<span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span><span class="op">-</span><span class="va">id</span>, names_sep <span class="op">=</span> <span class="st">"_"</span>, names_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>
<span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span><span class="op">-</span><span class="va">id</span>, names_sep <span class="op">=</span> <span class="st">"_"</span>, names_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".value"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></code></pre>
</li>
<li><p><code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> gains a <code>names_sort</code> argument which allows you to sort column names in order. The default, <code>FALSE</code>, orders columms by their first appearance (<a href="https://github.com/tidyverse/tidyr/issues/839" class="external-link">#839</a>). In a future version, I’ll consider changing the default to <code>TRUE</code>.</p></li>
<li><p><code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> gains a <code>names_glue</code> argument that allows you to construct output column names with a glue specification.</p></li>
<li><p><code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> arguments <code>values_fn</code> and <code>values_fill</code> can now be single values; you now only need to use a named list if you want to use different values for different value columns (<a href="https://github.com/tidyverse/tidyr/issues/739" class="external-link">#739</a>, <a href="https://github.com/tidyverse/tidyr/issues/746" class="external-link">#746</a>). They also get improved errors if they’re not of the expected type.</p></li>
</ul></div>
<div class="section level3">
<h3 id="rectangling-1-1-0">Rectangling<a class="anchor" aria-label="anchor" href="#rectangling-1-1-0"></a></h3>
<ul><li><p><code><a href="../reference/hoist.html">hoist()</a></code> now automatically names pluckers that are a single string (<a href="https://github.com/tidyverse/tidyr/issues/837" class="external-link">#837</a>). It error if you use duplicated column names (<a href="https://github.com/mgirlich" class="external-link">@mgirlich</a>, <a href="https://github.com/tidyverse/tidyr/issues/834" class="external-link">#834</a>), and now uses <code><a href="https://rlang.r-lib.org/reference/list2.html" class="external-link">rlang::list2()</a></code> behind the scenes (which means that you can now use <code>!!!</code> and <code>:=</code>) (<a href="https://github.com/tidyverse/tidyr/issues/801" class="external-link">#801</a>).</p></li>
<li><p><code><a href="../reference/hoist.html">unnest_longer()</a></code>, <code><a href="../reference/hoist.html">unnest_wider()</a></code>, and <code><a href="../reference/hoist.html">hoist()</a></code> do a better job simplifying list-cols. They no longer add unneeded <code>unspecified()</code> when the result is still a list (<a href="https://github.com/tidyverse/tidyr/issues/806" class="external-link">#806</a>), and work when the list contains non-vectors (<a href="https://github.com/tidyverse/tidyr/issues/810" class="external-link">#810</a>, <a href="https://github.com/tidyverse/tidyr/issues/848" class="external-link">#848</a>).</p></li>
<li><p><code>unnest_wider(names_sep = "")</code> now provides default names for unnamed inputs, suppressing the many previous name repair messages (<a href="https://github.com/tidyverse/tidyr/issues/742" class="external-link">#742</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="nesting-1-1-0">Nesting<a class="anchor" aria-label="anchor" href="#nesting-1-1-0"></a></h3>
<ul><li><p><code><a href="../reference/pack.html">pack()</a></code> and <code><a href="../reference/nest.html">nest()</a></code> gains a <code>.names_sep</code> argument allows you to strip outer names from inner names, in symmetrical way to how the same argument to <code><a href="../reference/pack.html">unpack()</a></code> and <code><a href="../reference/nest.html">unnest()</a></code> combines inner and outer names (<a href="https://github.com/tidyverse/tidyr/issues/795" class="external-link">#795</a>, <a href="https://github.com/tidyverse/tidyr/issues/797" class="external-link">#797</a>).</p></li>
<li><p><code><a href="../reference/hoist.html">unnest_wider()</a></code> and <code><a href="../reference/hoist.html">unnest_longer()</a></code> can now unnest <code>list_of</code> columns. This is important for unnesting columns created from <code><a href="../reference/nest.html">nest()</a></code> and with <code><a href="../reference/pivot_wider.html">pivot_wider()</a></code>, which will create <code>list_of</code> columns if the id columns are non-unique (<a href="https://github.com/tidyverse/tidyr/issues/741" class="external-link">#741</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-minor-improvements-1-1-0">Bug fixes and minor improvements<a class="anchor" aria-label="anchor" href="#bug-fixes-and-minor-improvements-1-1-0"></a></h3>
<ul><li><p><code><a href="../reference/chop.html">chop()</a></code> now creates list-columns of class <code><a href="https://vctrs.r-lib.org/reference/list_of.html" class="external-link">vctrs::list_of()</a></code>. This helps keep track of the type in case the chopped data frame is empty, allowing <code><a href="../reference/chop.html">unchop()</a></code> to reconstitute a data frame with the correct number and types of column even when there are no observations.</p></li>
<li><p><code><a href="../reference/drop_na.html">drop_na()</a></code> now preserves attributes of unclassed vectors (<a href="https://github.com/tidyverse/tidyr/issues/905" class="external-link">#905</a>).</p></li>
<li><p><code><a href="../reference/expand.html">expand()</a></code>, <code><a href="../reference/expand_grid.html">expand_grid()</a></code>, <code><a href="../reference/expand.html">crossing()</a></code>, and <code><a href="../reference/expand.html">nesting()</a></code> once again evaluate their inputs iteratively, so you can refer to freshly created columns, e.g. <code>crossing(x = seq(-2, 2), y = x)</code> (<a href="https://github.com/tidyverse/tidyr/issues/820" class="external-link">#820</a>).</p></li>
<li><p><code><a href="../reference/expand.html">expand()</a></code>, <code><a href="../reference/expand_grid.html">expand_grid()</a></code>, <code><a href="../reference/expand.html">crossing()</a></code>, and <code><a href="../reference/expand.html">nesting()</a></code> gain a <code>.name_repair</code> giving you control over their name repair strategy (<a href="https://github.com/jeffreypullin" class="external-link">@jeffreypullin</a>, <a href="https://github.com/tidyverse/tidyr/issues/798" class="external-link">#798</a>).</p></li>
<li><p><code><a href="../reference/extract.html">extract()</a></code> lets you use <code>NA</code> in <code>into</code>, as documented (<a href="https://github.com/tidyverse/tidyr/issues/793" class="external-link">#793</a>).</p></li>
<li><p><code><a href="../reference/extract.html">extract()</a></code>, <code><a href="../reference/separate.html">separate()</a></code>, <code><a href="../reference/hoist.html">hoist()</a></code>, <code><a href="../reference/hoist.html">unnest_longer()</a></code>, and <code><a href="../reference/hoist.html">unnest_wider()</a></code> give a better error message if <code>col</code> is missing (<a href="https://github.com/tidyverse/tidyr/issues/805" class="external-link">#805</a>).</p></li>
<li><p><code><a href="../reference/pack.html">pack()</a></code>’s first argument is now <code>.data</code> instead of <code>data</code> (<a href="https://github.com/tidyverse/tidyr/issues/759" class="external-link">#759</a>).</p></li>
<li><p><code><a href="../reference/pivot_longer.html">pivot_longer()</a></code> now errors if <code>values_to</code> is not a length-1 character vector (<a href="https://github.com/tidyverse/tidyr/issues/949" class="external-link">#949</a>).</p></li>
<li><p><code><a href="../reference/pivot_longer.html">pivot_longer()</a></code> and <code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> are now generic so implementations can be provided for objects other than data frames (<a href="https://github.com/tidyverse/tidyr/issues/800" class="external-link">#800</a>).</p></li>
<li><p><code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> can now pivot data frame columns (<a href="https://github.com/tidyverse/tidyr/issues/926" class="external-link">#926</a>)</p></li>
<li><p><code>unite(na.rm = TRUE)</code> now works for all types of variable, not just character vectors (<a href="https://github.com/tidyverse/tidyr/issues/765" class="external-link">#765</a>).</p></li>
<li><p><code><a href="../reference/hoist.html">unnest_wider()</a></code> gives a better error message if you attempt to unnest multiple columns (<a href="https://github.com/tidyverse/tidyr/issues/740" class="external-link">#740</a>).</p></li>
<li><p><code><a href="../reference/hoist.html">unnest_auto()</a></code> works when the input data contains a column called <code>col</code> (<a href="https://github.com/tidyverse/tidyr/issues/959" class="external-link">#959</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.2" id="tidyr-102">tidyr 1.0.2<small>2020-01-24</small><a class="anchor" aria-label="anchor" href="#tidyr-102"></a></h2>
<ul><li>Minor fixes for dev versions of rlang, tidyselect, and tibble.</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.1" id="tidyr-101">tidyr 1.0.1<a class="anchor" aria-label="anchor" href="#tidyr-101"></a></h2>
<ul><li>Did not exist since I accidentally released v1.0.2</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="1.0.0" id="tidyr-100">tidyr 1.0.0<small>2019-09-11</small><a class="anchor" aria-label="anchor" href="#tidyr-100"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-1-0-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-1-0-0"></a></h3>
<p>See <code><a href="../articles/in-packages.html">vignette("in-packages")</a></code> for a detailed transition guide.</p>
<ul><li>
<p><code><a href="../reference/nest.html">nest()</a></code> and <code><a href="../reference/nest.html">unnest()</a></code> have new syntax. The majority of existing usage should be automatically translated to the new syntax with a warning. If that doesn’t work, put this in your script to use the old versions until you can take a closer look and update your code:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span>
<span class="va">nest</span> <span class="op">&lt;-</span> <span class="va">nest_legacy</span>
<span class="va">unnest</span> <span class="op">&lt;-</span> <span class="va">unnest_legacy</span></code></pre></div>
</li>
<li><p><code><a href="../reference/nest.html">nest()</a></code> now preserves grouping, which has implications for downstream calls to group-aware functions, such as <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code> and <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code>.</p></li>
<li><p>The first argument of <code><a href="../reference/nest.html">nest()</a></code> has changed from <code>data</code> to <code>.data</code>.</p></li>
<li><p><code><a href="../reference/nest.html">unnest()</a></code> uses the <a href="https://www.tidyverse.org/blog/2019/01/tibble-2.0.1/#name-repair" class="external-link">emerging tidyverse standard</a> to disambiguate unique names. Use <code>names_repair = tidyr_legacy</code> to request the previous approach.</p></li>
<li>
<p><code><a href="../reference/deprecated-se.html">unnest_()</a></code>/<code><a href="../reference/deprecated-se.html">nest_()</a></code> and the lazyeval methods for <code><a href="../reference/nest.html">unnest()</a></code>/<code><a href="../reference/nest.html">nest()</a></code> are now defunct. They have been deprecated for some time, and, since the interface has changed, package authors will need to update to avoid deprecation warnings. I think one clean break should be less work for everyone.</p>
<p>All other lazyeval functions have been formally deprecated, and will be made defunct in the next major release. (See <a href="https://lifecycle.r-lib.org/articles/lifecycle.html" class="external-link">lifecycle vignette</a> for details on deprecation stages).</p>
</li>
<li><p><code><a href="../reference/expand.html">crossing()</a></code> and <code><a href="../reference/expand.html">nesting()</a></code> now return 0-row outputs if any input is a length-0 vector. If you want to preserve the previous behaviour which silently dropped these inputs, you should convert empty vectors to <code>NULL</code>. (More discussion on this general pattern at <a href="https://github.com/tidyverse/principles/issues/24" class="external-link uri">https://github.com/tidyverse/principles/issues/24</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="pivoting-1-0-0">Pivoting<a class="anchor" aria-label="anchor" href="#pivoting-1-0-0"></a></h3>
<p>New <code><a href="../reference/pivot_longer.html">pivot_longer()</a></code> and <code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> provide modern alternatives to <code><a href="../reference/spread.html">spread()</a></code> and <code><a href="../reference/gather.html">gather()</a></code>. They have been carefully redesigned to be easier to learn and remember, and include many new features. Learn more in <code><a href="../articles/pivot.html">vignette("pivot")</a></code>.</p>
<p>These functions resolve multiple existing issues with <code><a href="../reference/spread.html">spread()</a></code>/<code><a href="../reference/gather.html">gather()</a></code>. Both functions now handle mulitple value columns (<a href="https://github.com/tidyverse/tidyr/issues/149" class="external-link">#149</a>/#150), support more vector types (<a href="https://github.com/tidyverse/tidyr/issues/333" class="external-link">#333</a>), use tidyverse conventions for duplicated column names (<a href="https://github.com/tidyverse/tidyr/issues/496" class="external-link">#496</a>, <a href="https://github.com/tidyverse/tidyr/issues/478" class="external-link">#478</a>), and are symmetric (<a href="https://github.com/tidyverse/tidyr/issues/453" class="external-link">#453</a>). <code><a href="../reference/pivot_longer.html">pivot_longer()</a></code> gracefully handles duplicated column names (<a href="https://github.com/tidyverse/tidyr/issues/472" class="external-link">#472</a>), and can directly split column names into multiple variables. <code><a href="../reference/pivot_wider.html">pivot_wider()</a></code> can now aggregate (<a href="https://github.com/tidyverse/tidyr/issues/474" class="external-link">#474</a>), select keys (<a href="https://github.com/tidyverse/tidyr/issues/572" class="external-link">#572</a>), and has control over generated column names (<a href="https://github.com/tidyverse/tidyr/issues/208" class="external-link">#208</a>).</p>
<p>To demonstrate how these functions work in practice, tidyr has gained several new datasets: <code>relig_income</code>, <code>construction</code>, <code>billboard</code>, <code>us_rent_income</code>, <code>fish_encounters</code> and <code>world_bank_pop</code>.</p>
<p>Finally, tidyr demos have been removed. They are dated, and have been superseded by <code><a href="../articles/pivot.html">vignette("pivot")</a></code>.</p>
</div>
<div class="section level3">
<h3 id="rectangling-1-0-0">Rectangling<a class="anchor" aria-label="anchor" href="#rectangling-1-0-0"></a></h3>
<p>tidyr contains four new functions to support <strong>rectangling</strong>, turning a deeply nested list into a tidy tibble: <code><a href="../reference/hoist.html">unnest_longer()</a></code>, <code><a href="../reference/hoist.html">unnest_wider()</a></code>, <code><a href="../reference/hoist.html">unnest_auto()</a></code>, and <code><a href="../reference/hoist.html">hoist()</a></code>. They are documented in a new vignette: <code><a href="../articles/rectangle.html">vignette("rectangle")</a></code>.</p>
<p><code><a href="../reference/hoist.html">unnest_longer()</a></code> and <code><a href="../reference/hoist.html">unnest_wider()</a></code> make it easier to unnest list-columns of vectors into either rows or columns (<a href="https://github.com/tidyverse/tidyr/issues/418" class="external-link">#418</a>). <code><a href="../reference/hoist.html">unnest_auto()</a></code> automatically picks between <code>_longer()</code> and <code>_wider()</code> using heuristics based on the presence of common names.</p>
<p>New <code><a href="../reference/hoist.html">hoist()</a></code> provides a convenient way of plucking components of a list-column out into their own top-level columns (<a href="https://github.com/tidyverse/tidyr/issues/341" class="external-link">#341</a>). This is particularly useful when you are working with deeply nested JSON, because it provides a convenient shortcut for the <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> + <code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map()</a></code> pattern:</p>
<pre class="{r}"><code><span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/hoist.html">hoist</a></span><span class="op">(</span><span class="va">metadata</span>, name <span class="op">=</span> <span class="st">"name"</span><span class="op">)</span>
<span class="co"># shortcut for</span>
<span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_chr</a></span><span class="op">(</span><span class="va">metadata</span>, <span class="st">"name"</span><span class="op">)</span><span class="op">)</span></code></pre>
</div>
<div class="section level3">
<h3 id="nesting-1-0-0">Nesting<a class="anchor" aria-label="anchor" href="#nesting-1-0-0"></a></h3>
<p><code><a href="../reference/nest.html">nest()</a></code> and <code><a href="../reference/nest.html">unnest()</a></code> have been updated with new interfaces that are more closely aligned to evolving tidyverse conventions. They use the theory developed in <a href="https://vctrs.r-lib.org" class="external-link">vctrs</a> to more consistently handle mixtures of input types, and their arguments have been overhauled based on the last few years of experience. They are supported by a new <code><a href="../articles/nest.html">vignette("nest")</a></code>, which outlines some of the main ideas of nested data (it’s still very rough, but will get better over time).</p>
<p>The biggest change is to their operation with multiple columns: <code>df %&gt;% unnest(x, y, z)</code> becomes <code>df %&gt;% unnest(c(x, y, z))</code> and <code>df %&gt;% nest(x, y, z)</code> becomes <code>df %&gt;% nest(data = c(x, y, z))</code>.</p>
<p>I have done my best to ensure that common uses of <code><a href="../reference/nest.html">nest()</a></code> and <code><a href="../reference/nest.html">unnest()</a></code> will continue to work, generating an informative warning telling you precisely how you need to update your code. Please <a href="https://github.com/tidyverse/tidyr/issues/new" class="external-link">file an issue</a> if I’ve missed an important use case.</p>
<p><code><a href="../reference/nest.html">unnest()</a></code> has been overhauled:</p>
<ul><li><p>New <code>keep_empty</code> parameter ensures that every row in the input gets at least one row in the output, inserting missing values as needed (<a href="https://github.com/tidyverse/tidyr/issues/358" class="external-link">#358</a>).</p></li>
<li><p>Provides <code>names_sep</code> argument to control how inner and outer column names are combined.</p></li>
<li><p>Uses standard tidyverse name-repair rules, so by default you will get an error if the output would contain multiple columns with the same name. You can override by using <code>name_repair</code> (<a href="https://github.com/tidyverse/tidyr/issues/514" class="external-link">#514</a>).</p></li>
<li><p>Now supports <code>NULL</code> entries (<a href="https://github.com/tidyverse/tidyr/issues/436" class="external-link">#436</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="packing-and-chopping-1-0-0">Packing and chopping<a class="anchor" aria-label="anchor" href="#packing-and-chopping-1-0-0"></a></h3>
<p>Under the hood, <code><a href="../reference/nest.html">nest()</a></code> and <code><a href="../reference/nest.html">unnest()</a></code> are implemented with <code><a href="../reference/chop.html">chop()</a></code>, <code><a href="../reference/pack.html">pack()</a></code>, <code><a href="../reference/chop.html">unchop()</a></code>, and <code><a href="../reference/pack.html">unpack()</a></code>:</p>
<ul><li><p><code><a href="../reference/pack.html">pack()</a></code> and <code><a href="../reference/pack.html">unpack()</a></code> allow you to pack and unpack columns into data frame columns (<a href="https://github.com/tidyverse/tidyr/issues/523" class="external-link">#523</a>).</p></li>
<li><p><code><a href="../reference/chop.html">chop()</a></code> and <code><a href="../reference/chop.html">unchop()</a></code> chop up rows into sets of list-columns.</p></li>
</ul><p>Packing and chopping are interesting primarily because they are the atomic operations underlying nesting (and similarly, unchop and unpacking underlie unnesting), and I don’t expect them to be used directly very often.</p>
</div>
<div class="section level3">
<h3 id="new-features-1-0-0">New features<a class="anchor" aria-label="anchor" href="#new-features-1-0-0"></a></h3>
<ul><li><p>New <code><a href="../reference/expand_grid.html">expand_grid()</a></code>, a tidy version of <code><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid()</a></code>, is lower-level than the existing <code><a href="../reference/expand.html">expand()</a></code> and <code><a href="../reference/expand.html">crossing()</a></code> functions, as it takes individual vectors, and does not sort or uniquify them.</p></li>
<li><p><code><a href="../reference/expand.html">crossing()</a></code>, <code><a href="../reference/expand.html">nesting()</a></code>, and <code><a href="../reference/expand.html">expand()</a></code> have been rewritten to use the vctrs package. This should not affect much existing code, but considerably simplies the implementation and ensures that these functions work consistently across all generalised vectors (<a href="https://github.com/tidyverse/tidyr/issues/557" class="external-link">#557</a>). As part of this alignment, these functions now only drop <code>NULL</code> inputs, not any 0-length vector.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-minor-improvements-1-0-0">Bug fixes and minor improvements<a class="anchor" aria-label="anchor" href="#bug-fixes-and-minor-improvements-1-0-0"></a></h3>
<ul><li><p><code><a href="../reference/full_seq.html">full_seq()</a></code> now also works when gaps between observations are shorter than the given <code>period</code>, but are within the tolerance given by <code>tol</code>. Previously, gaps between consecutive observations had to be in the range [<code>period</code>, <code>period + tol</code>]; gaps can now be in the range [<code>period - tol</code>, <code>period + tol</code>] (<a href="https://github.com/ha0ye" class="external-link">@ha0ye</a>, <a href="https://github.com/tidyverse/tidyr/issues/657" class="external-link">#657</a>).</p></li>
<li><p>tidyr now re-exports <code><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble()</a></code>, <code><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble()</a></code>, and <code><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble()</a></code>, as well as the tidyselect helpers (<code><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with()</a></code>, <code>ends_width()</code>, …). This makes generating documentation, reprexes, and tests easier, and makes tidyr easier to use without also attaching dplyr.</p></li>
<li><p>All functions that take <code>...</code> have been instrumented with functions from the <a href="https://github.com/r-lib/ellipsis/" class="external-link">ellipsis</a> package to warn if you’ve supplied arguments that are ignored (typically because you’ve misspelled an argument name) (<a href="https://github.com/tidyverse/tidyr/issues/573" class="external-link">#573</a>).</p></li>
<li><p><code><a href="../reference/complete.html">complete()</a></code> now uses <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join()</a></code> so that all levels are preserved even when not all levels are specified (<a href="https://github.com/Ryo-N7" class="external-link">@Ryo-N7</a>, <a href="https://github.com/tidyverse/tidyr/issues/493" class="external-link">#493</a>).</p></li>
<li><p><code><a href="../reference/expand.html">crossing()</a></code> now takes the unique values of data frame inputs, not just vector inputs (<a href="https://github.com/tidyverse/tidyr/issues/490" class="external-link">#490</a>).</p></li>
<li><p><code><a href="../reference/gather.html">gather()</a></code> throws an error if a column is a data frame (<a href="https://github.com/tidyverse/tidyr/issues/553" class="external-link">#553</a>).</p></li>
<li><p><code><a href="../reference/extract.html">extract()</a></code> (and hence <code><a href="../reference/pivot_longer.html">pivot_longer()</a></code>) can extract multiple input values into a single output column (<a href="https://github.com/tidyverse/tidyr/issues/619" class="external-link">#619</a>).</p></li>
<li><p><code><a href="../reference/fill.html">fill()</a></code> is now implemented using <code><a href="https://dplyr.tidyverse.org/reference/mutate_all.html" class="external-link">dplyr::mutate_at()</a></code>. This radically simplifies the implementation and considerably improves performance when working with grouped data (<a href="https://github.com/tidyverse/tidyr/issues/520" class="external-link">#520</a>).</p></li>
<li><p><code><a href="../reference/fill.html">fill()</a></code> now accepts <code>downup</code> and <code>updown</code> as fill directions (<a href="https://github.com/coolbutuseless" class="external-link">@coolbutuseless</a>, <a href="https://github.com/tidyverse/tidyr/issues/505" class="external-link">#505</a>).</p></li>
<li><p><code><a href="../reference/unite.html">unite()</a></code> gains <code>na.rm</code> argument, making it easier to remove missing values prior to uniting values together (<a href="https://github.com/tidyverse/tidyr/issues/203" class="external-link">#203</a>)</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.8.3" id="tidyr-083">tidyr 0.8.3<small>2019-03-01</small><a class="anchor" aria-label="anchor" href="#tidyr-083"></a></h2>
<ul><li><p><code><a href="../reference/expand.html">crossing()</a></code> preserves factor levels (<a href="https://github.com/tidyverse/tidyr/issues/410" class="external-link">#410</a>), now works with list-columns (<a href="https://github.com/tidyverse/tidyr/issues/446" class="external-link">#446</a>, <a href="https://github.com/SamanthaToet" class="external-link">@SamanthaToet</a>). (These also help <code><a href="../reference/expand.html">expand()</a></code> which is built on top of <code><a href="../reference/expand.html">crossing()</a></code>)</p></li>
<li><p><code><a href="../reference/nest.html">nest()</a></code> is compatible with dplyr 0.8.0.</p></li>
<li><p><code><a href="../reference/spread.html">spread()</a></code> works when the id variable has names (<a href="https://github.com/tidyverse/tidyr/issues/525" class="external-link">#525</a>).</p></li>
<li><p><code><a href="../reference/nest.html">unnest()</a></code> preserves column being unnested when input is zero-length (<a href="https://github.com/tidyverse/tidyr/issues/483" class="external-link">#483</a>), using <code>list_of()</code> attribute to correctly restore columns, where possible.</p></li>
<li><p><code><a href="../reference/nest.html">unnest()</a></code> will run with named and unnamed list-columns of same length (<a href="https://github.com/hlendway" class="external-link">@hlendway</a>, <a href="https://github.com/tidyverse/tidyr/issues/460" class="external-link">#460</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.8.2" id="tidyr-082">tidyr 0.8.2<small>2018-10-28</small><a class="anchor" aria-label="anchor" href="#tidyr-082"></a></h2>
<ul><li><p><code><a href="../reference/separate.html">separate()</a></code> now accepts <code>NA</code> as a column name in the <code>into</code> argument to denote columns which are omitted from the result. (<a href="https://github.com/markdly" class="external-link">@markdly</a>, <a href="https://github.com/tidyverse/tidyr/issues/397" class="external-link">#397</a>).</p></li>
<li><p>Minor updates to ensure compatibility with dependencies.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.8.1" id="tidyr-081">tidyr 0.8.1<small>2018-05-18</small><a class="anchor" aria-label="anchor" href="#tidyr-081"></a></h2>
<ul><li>
<code><a href="../reference/nest.html">unnest()</a></code> weakens test of “atomicity” to restore previous behaviour when unnesting factors and dates (<a href="https://github.com/tidyverse/tidyr/issues/407" class="external-link">#407</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.8.0" id="tidyr-080">tidyr 0.8.0<small>2018-01-29</small><a class="anchor" aria-label="anchor" href="#tidyr-080"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-0-8-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-8-0"></a></h3>
<ul><li><p>There are no deliberate breaking changes in this release. However, a number of packages are failing with errors related to numbers of elements in columns, and row names. It is possible that these are accidental API changes or new bugs. If you see such an error in your package, I would sincerely appreciate a minimal reprex.</p></li>
<li><p><code><a href="../reference/separate.html">separate()</a></code> now correctly uses -1 to refer to the far right position, instead of -2. If you depended on this behaviour, you’ll need to switch on <code>packageVersion("tidyr") &gt; "0.7.2"</code></p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-8-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-8-0"></a></h3>
<ul><li><p>Increased test coverage from 84% to 99%.</p></li>
<li><p><code><a href="../reference/uncount.html">uncount()</a></code> performs the inverse operation of <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">dplyr::count()</a></code> (<a href="https://github.com/tidyverse/tidyr/issues/279" class="external-link">#279</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-minor-improvements-0-8-0">Bug fixes and minor improvements<a class="anchor" aria-label="anchor" href="#bug-fixes-and-minor-improvements-0-8-0"></a></h3>
<ul><li><p><code>complete(data)</code> now returns <code>data</code> rather than throwing an error (<a href="https://github.com/tidyverse/tidyr/issues/390" class="external-link">#390</a>). <code><a href="../reference/complete.html">complete()</a></code> with zero-length completions returns original input (<a href="https://github.com/tidyverse/tidyr/issues/331" class="external-link">#331</a>).</p></li>
<li><p><code><a href="../reference/expand.html">crossing()</a></code> preserves <code>NA</code>s (<a href="https://github.com/tidyverse/tidyr/issues/364" class="external-link">#364</a>).</p></li>
<li><p><code><a href="../reference/expand.html">expand()</a></code> with empty input gives empty data frame instead of <code>NULL</code> (<a href="https://github.com/tidyverse/tidyr/issues/331" class="external-link">#331</a>).</p></li>
<li><p><code><a href="../reference/expand.html">expand()</a></code>, <code><a href="../reference/expand.html">crossing()</a></code>, and <code><a href="../reference/complete.html">complete()</a></code> now complete empty factors instead of dropping them (<a href="https://github.com/tidyverse/tidyr/issues/270" class="external-link">#270</a>, <a href="https://github.com/tidyverse/tidyr/issues/285" class="external-link">#285</a>)</p></li>
<li><p><code><a href="../reference/extract.html">extract()</a></code> has a better error message if <code>regex</code> does not contain the expected number of groups (<a href="https://github.com/tidyverse/tidyr/issues/313" class="external-link">#313</a>).</p></li>
<li><p><code><a href="../reference/drop_na.html">drop_na()</a></code> no longer drops columns (<a href="https://github.com/jennybryan" class="external-link">@jennybryan</a>, <a href="https://github.com/tidyverse/tidyr/issues/245" class="external-link">#245</a>), and works with list-cols (<a href="https://github.com/tidyverse/tidyr/issues/280" class="external-link">#280</a>). Equivalent of <code>NA</code> in a list column is any empty (length 0) data structure.</p></li>
<li><p><code><a href="../reference/nest.html">nest()</a></code> is now faster, especially when a long data frame is collapsed into a nested data frame with few rows.</p></li>
<li><p><code><a href="../reference/nest.html">nest()</a></code> on a zero-row data frame works as expected (<a href="https://github.com/tidyverse/tidyr/issues/320" class="external-link">#320</a>).</p></li>
<li><p><code><a href="../reference/replace_na.html">replace_na()</a></code> no longer complains if you try and replace missing values in variables not present in the data (<a href="https://github.com/tidyverse/tidyr/issues/356" class="external-link">#356</a>).</p></li>
<li><p><code><a href="../reference/replace_na.html">replace_na()</a></code> now also works with vectors (<a href="https://github.com/tidyverse/tidyr/issues/342" class="external-link">#342</a>, <a href="https://github.com/flying-sheep" class="external-link">@flying-sheep</a>), and can replace <code>NULL</code> in list-columns. It throws a better error message if you attempt to replace with something other than length 1.</p></li>
<li><p><code><a href="../reference/separate.html">separate()</a></code> no longer checks that <code>...</code> is empty, allowing methods to make use of it. This check was added in tidyr 0.4.0 (2016-02-02) to deprecate previous behaviour where <code>...</code> was passed to <code><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit()</a></code>.</p></li>
<li><p><code><a href="../reference/separate.html">separate()</a></code> and <code><a href="../reference/extract.html">extract()</a></code> now insert columns in correct position when <code>drop = TRUE</code> (<a href="https://github.com/tidyverse/tidyr/issues/394" class="external-link">#394</a>).</p></li>
<li><p><code><a href="../reference/separate.html">separate()</a></code> now works correctly counts from RHS when using negative integer <code>sep</code> values (<a href="https://github.com/markdly" class="external-link">@markdly</a>, <a href="https://github.com/tidyverse/tidyr/issues/315" class="external-link">#315</a>).</p></li>
<li><p><code><a href="../reference/separate.html">separate()</a></code> gets improved warning message when pieces aren’t as expected (<a href="https://github.com/tidyverse/tidyr/issues/375" class="external-link">#375</a>).</p></li>
<li><p><code><a href="../reference/separate_rows.html">separate_rows()</a></code> supports list columns (<a href="https://github.com/tidyverse/tidyr/issues/321" class="external-link">#321</a>), and works with empty tibbles.</p></li>
<li><p><code><a href="../reference/spread.html">spread()</a></code> now consistently returns 0 row outputs for 0 row inputs (<a href="https://github.com/tidyverse/tidyr/issues/269" class="external-link">#269</a>).</p></li>
<li><p><code><a href="../reference/spread.html">spread()</a></code> now works when <code>key</code> column includes <code>NA</code> and <code>drop</code> is <code>FALSE</code> (<a href="https://github.com/tidyverse/tidyr/issues/254" class="external-link">#254</a>).</p></li>
<li><p><code><a href="../reference/spread.html">spread()</a></code> no longer returns tibbles with row names (<a href="https://github.com/tidyverse/tidyr/issues/322" class="external-link">#322</a>).</p></li>
<li><p><code><a href="../reference/spread.html">spread()</a></code>, <code><a href="../reference/separate.html">separate()</a></code>, <code><a href="../reference/extract.html">extract()</a></code> (<a href="https://github.com/tidyverse/tidyr/issues/255" class="external-link">#255</a>), and <code><a href="../reference/gather.html">gather()</a></code> (<a href="https://github.com/tidyverse/tidyr/issues/347" class="external-link">#347</a>) now replace existing variables rather than creating an invalid data frame with duplicated variable names (matching the semantics of mutate).</p></li>
<li><p><code><a href="../reference/unite.html">unite()</a></code> now works (as documented) if you don’t supply any variables (<a href="https://github.com/tidyverse/tidyr/issues/355" class="external-link">#355</a>).</p></li>
<li><p><code><a href="../reference/nest.html">unnest()</a></code> gains <code>preserve</code> argument which allows you to preserve list columns without unnesting them (<a href="https://github.com/tidyverse/tidyr/issues/328" class="external-link">#328</a>).</p></li>
<li><p><code><a href="../reference/nest.html">unnest()</a></code> can unnested list-columns contains lists of lists (<a href="https://github.com/tidyverse/tidyr/issues/278" class="external-link">#278</a>).</p></li>
<li><p><code>unnest(df)</code> now works if <code>df</code> contains no list-cols (<a href="https://github.com/tidyverse/tidyr/issues/344" class="external-link">#344</a>)</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.7.2" id="tidyr-072">tidyr 0.7.2<small>2017-10-16</small><a class="anchor" aria-label="anchor" href="#tidyr-072"></a></h2>
<ul><li><p>The SE variants <code><a href="../reference/deprecated-se.html">gather_()</a></code>, <code><a href="../reference/deprecated-se.html">spread_()</a></code> and <code><a href="../reference/deprecated-se.html">nest_()</a></code> now treat non-syntactic names in the same way as pre tidy eval versions of tidyr (<a href="https://github.com/tidyverse/tidyr/issues/361" class="external-link">#361</a>).</p></li>
<li><p>Fix tidyr bug revealed by R-devel.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.7.1" id="tidyr-071">tidyr 0.7.1<small>2017-09-01</small><a class="anchor" aria-label="anchor" href="#tidyr-071"></a></h2>
<p>This is a hotfix release to account for some tidyselect changes in the unit tests.</p>
<p>Note that the upcoming version of tidyselect backtracks on some of the changes announced for 0.7.0. The special evaluation semantics for selection have been changed back to the old behaviour because the new rules were causing too much trouble and confusion. From now on data expressions (symbols and calls to <code>:</code> and <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>) can refer to both registered variables and to objects from the context.</p>
<p>However the semantics for context expressions (any calls other than to <code>:</code> and <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>) remain the same. Those expressions are evaluated in the context only and cannot refer to registered variables. If you’re writing functions and refer to contextual objects, it is still a good idea to avoid data expressions by following the advice of the 0.7.0 release notes.</p>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.7.0" id="tidyr-070">tidyr 0.7.0<small>2017-08-16</small><a class="anchor" aria-label="anchor" href="#tidyr-070"></a></h2>
<p>This release includes important changes to tidyr internals. Tidyr now supports the new tidy evaluation framework for quoting (NSE) functions. It also uses the new tidyselect package as selecting backend.</p>
<div class="section level3">
<h3 id="breaking-changes-0-7-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-7-0"></a></h3>
<ul><li>
<p>If you see error messages about objects or functions not found, it is likely because the selecting functions are now stricter in their arguments An example of selecting function is <code><a href="../reference/gather.html">gather()</a></code> and its <code>...</code> argument. This change makes the code more robust by disallowing ambiguous scoping. Consider the following code:</p>
<pre><code><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">3</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>w <span class="op">=</span> <span class="fl">1</span>, x <span class="op">=</span> <span class="fl">2</span>, y <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="../reference/gather.html">gather</a></span><span class="op">(</span><span class="va">df</span>, <span class="st">"variable"</span>, <span class="st">"value"</span>, <span class="fl">1</span><span class="op">:</span><span class="va">x</span><span class="op">)</span></code></pre>
<p>Does it select the first three columns (using the <code>x</code> defined in the global environment), or does it select the first two columns (using the column named <code>x</code>)?</p>
<p>To solve this ambiguity, we now make a strict distinction between data and context expressions. A data expression is either a bare name or an expression like <code>x:y</code> or <code>c(x, y)</code>. In a data expression, you can only refer to columns from the data frame. Everything else is a context expression in which you can only refer to objects that you have defined with <code>&lt;-</code>.</p>
<p>In practice this means that you can no longer refer to contextual objects like this:</p>
<pre><code><span class="va">mtcars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/gather.html">gather</a></span><span class="op">(</span><span class="va">var</span>, <span class="va">value</span>, <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span>

<span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">3</span>
<span class="va">mtcars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/gather.html">gather</a></span><span class="op">(</span><span class="va">var</span>, <span class="va">value</span>, <span class="fl">1</span><span class="op">:</span><span class="va">x</span><span class="op">)</span>
<span class="va">mtcars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/gather.html">gather</a></span><span class="op">(</span><span class="va">var</span>, <span class="va">value</span>, <span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></code></pre>
<p>You now have to be explicit about where to find objects. To do so, you can use the quasiquotation operator <code>!!</code> which will evaluate its argument early and inline the result:</p>
<pre class="{r}"><code><span class="va">mtcars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/gather.html">gather</a></span><span class="op">(</span><span class="va">var</span>, <span class="va">value</span>, <span class="op">!</span><span class="op">!</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span>
<span class="va">mtcars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/gather.html">gather</a></span><span class="op">(</span><span class="va">var</span>, <span class="va">value</span>, <span class="op">!</span><span class="op">!</span> <span class="fl">1</span><span class="op">:</span><span class="va">x</span><span class="op">)</span>
<span class="va">mtcars</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/gather.html">gather</a></span><span class="op">(</span><span class="va">var</span>, <span class="va">value</span>, <span class="op">!</span><span class="op">!</span> <span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></code></pre>
<p>An alternative is to turn your data expression into a context expression by using <code><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq()</a></code> or <code><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len()</a></code> instead of <code>:</code>. See the section on tidyselect for more information about these semantics.</p>
</li>
<li><p>Following the switch to tidy evaluation, you might see warnings about the “variable context not set”. This is most likely caused by supplyng helpers like <code><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything()</a></code> to underscored versions of tidyr verbs. Helpers should be always be evaluated lazily. To fix this, just quote the helper with a formula: <code>drop_na(df, ~everything())</code>.</p></li>
<li>
<p>The selecting functions are now stricter when you supply integer positions. If you see an error along the lines of</p>
<pre><code>`-0.949999999999999`, `-0.940000000000001`, ... must resolve to
integer column positions, not a double vector</code></pre>
<p>please round the positions before supplying them to tidyr. Double vectors are fine as long as they are rounded.</p>
</li>
</ul></div>
<div class="section level3">
<h3 id="switch-to-tidy-evaluation-0-7-0">Switch to tidy evaluation<a class="anchor" aria-label="anchor" href="#switch-to-tidy-evaluation-0-7-0"></a></h3>
<p>tidyr is now a tidy evaluation grammar. See the <a href="https://dplyr.tidyverse.org/articles/programming.html" class="external-link">programming vignette</a> in dplyr for practical information about tidy evaluation.</p>
<p>The tidyr port is a bit special. While the philosophy of tidy evaluation is that R code should refer to real objects (from the data frame or from the context), we had to make some exceptions to this rule for tidyr. The reason is that several functions accept bare symbols to specify the names of <em>new</em> columns to create (<code><a href="../reference/gather.html">gather()</a></code> being a prime example). This is not tidy because the symbol do not represent any actual object. Our workaround is to capture these arguments using <code><a href="https://rlang.r-lib.org/reference/quo_label.html" class="external-link">rlang::quo_name()</a></code> (so they still support quasiquotation and you can unquote symbols or strings). This type of NSE is now discouraged in the tidyverse: symbols in R code should represent real objects.</p>
<p>Following the switch to tidy eval the underscored variants are softly deprecated. However they will remain around for some time and without warning for backward compatibility.</p>
</div>
<div class="section level3">
<h3 id="switch-to-the-tidyselect-backend-0-7-0">Switch to the tidyselect backend<a class="anchor" aria-label="anchor" href="#switch-to-the-tidyselect-backend-0-7-0"></a></h3>
<p>The selecting backend of dplyr has been extracted in a standalone package tidyselect which tidyr now uses for selecting variables. It is used for selecting multiple variables (in <code><a href="../reference/drop_na.html">drop_na()</a></code>) as well as single variables (the <code>col</code> argument of <code><a href="../reference/extract.html">extract()</a></code> and <code><a href="../reference/separate.html">separate()</a></code>, and the <code>key</code> and <code>value</code> arguments of <code><a href="../reference/spread.html">spread()</a></code>). This implies the following changes:</p>
<ul><li><p>The arguments for selecting a single variable now support all features from <code><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">dplyr::pull()</a></code>. You can supply a name or a position, including negative positions.</p></li>
<li>
<p>Multiple variables are now selected a bit differently. We now make a strict distinction between data and context expressions. A data expression is either a bare name of an expression like <code>x:y</code> or <code>c(x, y)</code>. In a data expression, you can only refer to columns from the data frame. Everything else is a context expression in which you can only refer to objects that you have defined with <code>&lt;-</code>.</p>
<p>You can still refer to contextual objects in a data expression by being explicit. One way of being explicit is to unquote a variable from the environment with the tidy eval operator <code>!!</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">2</span>
<span class="fu"><a href="../reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">df</span>, <span class="fl">2</span><span class="op">)</span>     <span class="co"># Works fine</span>
<span class="fu"><a href="../reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">x</span><span class="op">)</span>     <span class="co"># Object 'x' not found</span>
<span class="fu"><a href="../reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">df</span>, <span class="op">!</span><span class="op">!</span> <span class="va">x</span><span class="op">)</span>  <span class="co"># Works as if you had supplied 2</span></code></pre></div>
<p>On the other hand, select helpers like <code>start_with()</code> are context expressions. It is therefore easy to refer to objects and they will never be ambiguous with data columns:</p>
<pre class="{r}"><code><span class="va">x</span> <span class="op">&lt;-</span> <span class="st">"d"</span>
<span class="fu"><a href="../reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></code></pre>
<p>While these special rules is in contrast to most dplyr and tidyr verbs (where both the data and the context are in scope) they make sense for selecting functions and should provide more robust and helpful semantics.</p>
</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.6.3" id="tidyr-063">tidyr 0.6.3<small>2017-05-15</small><a class="anchor" aria-label="anchor" href="#tidyr-063"></a></h2>
<ul><li>Patch tests to be compatible with dev tibble</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.6.2" id="tidyr-062">tidyr 0.6.2<small>2017-05-04</small><a class="anchor" aria-label="anchor" href="#tidyr-062"></a></h2>
<ul><li><p>Register C functions</p></li>
<li><p>Added package docs</p></li>
<li><p>Patch tests to be compatible with dev dplyr.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.6.1" id="tidyr-061">tidyr 0.6.1<small>2017-01-10</small><a class="anchor" aria-label="anchor" href="#tidyr-061"></a></h2>
<ul><li><p>Patch test to be compatible with dev tibble</p></li>
<li><p>Changed deprecation message of <code><a href="../reference/extract_numeric.html">extract_numeric()</a></code> to point to <code><a href="https://readr.tidyverse.org/reference/parse_number.html" class="external-link">readr::parse_number()</a></code> rather than <code>readr::parse_numeric()</code></p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.6.0" id="tidyr-060">tidyr 0.6.0<small>2016-08-12</small><a class="anchor" aria-label="anchor" href="#tidyr-060"></a></h2>
<div class="section level3">
<h3 id="api-changes-0-6-0">API changes<a class="anchor" aria-label="anchor" href="#api-changes-0-6-0"></a></h3>
<ul><li><p><code><a href="../reference/drop_na.html">drop_na()</a></code> removes observations which have <code>NA</code> in the given variables. If no variables are given, all variables are considered (<a href="https://github.com/tidyverse/tidyr/issues/194" class="external-link">#194</a>, <a href="https://github.com/janschulz" class="external-link">@janschulz</a>).</p></li>
<li><p><code><a href="../reference/extract_numeric.html">extract_numeric()</a></code> has been deprecated (<a href="https://github.com/tidyverse/tidyr/issues/213" class="external-link">#213</a>).</p></li>
<li><p>Renamed <code>table4</code> and <code>table5</code> to <code>table4a</code> and <code>table4b</code> to make their connection more clear. The <code>key</code> and <code>value</code> variables in <code>table2</code> have been renamed to <code>type</code> and <code>count</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-minor-improvements-0-6-0">Bug fixes and minor improvements<a class="anchor" aria-label="anchor" href="#bug-fixes-and-minor-improvements-0-6-0"></a></h3>
<ul><li><p><code><a href="../reference/expand.html">expand()</a></code>, <code><a href="../reference/expand.html">crossing()</a></code>, and <code><a href="../reference/expand.html">nesting()</a></code> now silently drop zero-length inputs.</p></li>
<li><p><code><a href="../reference/deprecated-se.html">crossing_()</a></code> and <code><a href="../reference/deprecated-se.html">nesting_()</a></code> are versions of <code><a href="../reference/expand.html">crossing()</a></code> and <code><a href="../reference/expand.html">nesting()</a></code> that take a list as input.</p></li>
<li><p><code><a href="../reference/full_seq.html">full_seq()</a></code> works correctly for dates and date/times.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.5.1" id="tidyr-051">tidyr 0.5.1<small>2016-06-14</small><a class="anchor" aria-label="anchor" href="#tidyr-051"></a></h2>
<ul><li>Restored compatibility with R &lt; 3.3.0 by avoiding <code>getS3method(envir = )</code> (<a href="https://github.com/tidyverse/tidyr/issues/205" class="external-link">#205</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.5.0" id="tidyr-050">tidyr 0.5.0<small>2016-06-12</small><a class="anchor" aria-label="anchor" href="#tidyr-050"></a></h2>
<div class="section level3">
<h3 id="new-functions-0-5-0">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-5-0"></a></h3>
<ul><li>
<code><a href="../reference/separate_rows.html">separate_rows()</a></code> separates observations with multiple delimited values into separate rows (<a href="https://github.com/tidyverse/tidyr/issues/69" class="external-link">#69</a>, <a href="https://github.com/aaronwolen" class="external-link">@aaronwolen</a>).</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-minor-improvements-0-5-0">Bug fixes and minor improvements<a class="anchor" aria-label="anchor" href="#bug-fixes-and-minor-improvements-0-5-0"></a></h3>
<ul><li><p><code><a href="../reference/complete.html">complete()</a></code> preserves grouping created by dplyr (<a href="https://github.com/tidyverse/tidyr/issues/168" class="external-link">#168</a>).</p></li>
<li><p><code><a href="../reference/expand.html">expand()</a></code> (and hence <code><a href="../reference/complete.html">complete()</a></code>) preserves the ordered attribute of factors (<a href="https://github.com/tidyverse/tidyr/issues/165" class="external-link">#165</a>).</p></li>
<li><p><code><a href="../reference/full_seq.html">full_seq()</a></code> preserve attributes for dates and date/times (<a href="https://github.com/tidyverse/tidyr/issues/156" class="external-link">#156</a>), and sequences no longer need to start at 0.</p></li>
<li><p><code><a href="../reference/gather.html">gather()</a></code> can now gather together list columns (<a href="https://github.com/tidyverse/tidyr/issues/175" class="external-link">#175</a>), and <code>gather_.data.frame(na.rm = TRUE)</code> now only removes missing values if they’re actually present (<a href="https://github.com/tidyverse/tidyr/issues/173" class="external-link">#173</a>).</p></li>
<li><p><code><a href="../reference/nest.html">nest()</a></code> returns correct output if every variable is nested (<a href="https://github.com/tidyverse/tidyr/issues/186" class="external-link">#186</a>).</p></li>
<li><p><code><a href="../reference/separate.html">separate()</a></code> fills from right-to-left (not left-to-right!) when fill = “left” (<a href="https://github.com/tidyverse/tidyr/issues/170" class="external-link">#170</a>, <a href="https://github.com/dgrtwo" class="external-link">@dgrtwo</a>).</p></li>
<li><p><code><a href="../reference/separate.html">separate()</a></code> and <code><a href="../reference/unite.html">unite()</a></code> now automatically drop removed variables from grouping (<a href="https://github.com/tidyverse/tidyr/issues/159" class="external-link">#159</a>, <a href="https://github.com/tidyverse/tidyr/issues/177" class="external-link">#177</a>).</p></li>
<li><p><code><a href="../reference/spread.html">spread()</a></code> gains a <code>sep</code> argument. If not-null, this will name columns as “key<sep>value”. Additionally, if sep is <code>NULL</code> missing values will be converted to <code>&lt;NA&gt;</code> (<a href="https://github.com/tidyverse/tidyr/issues/68" class="external-link">#68</a>).</sep></p></li>
<li><p><code><a href="../reference/spread.html">spread()</a></code> works in the presence of list-columns (<a href="https://github.com/tidyverse/tidyr/issues/199" class="external-link">#199</a>)</p></li>
<li><p><code><a href="../reference/nest.html">unnest()</a></code> works with non-syntactic names (<a href="https://github.com/tidyverse/tidyr/issues/190" class="external-link">#190</a>).</p></li>
<li><p><code><a href="../reference/nest.html">unnest()</a></code> gains a <code>sep</code> argument. If non-null, this will rename the columns of nested data frames to include both the original column name, and the nested column name, separated by <code>.sep</code> (<a href="https://github.com/tidyverse/tidyr/issues/184" class="external-link">#184</a>).</p></li>
<li><p><code><a href="../reference/nest.html">unnest()</a></code> gains <code>.id</code> argument that works the same way as <code><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows()</a></code>. This is useful if you have a named list of data frames or vectors (<a href="https://github.com/tidyverse/tidyr/issues/125" class="external-link">#125</a>).</p></li>
<li><p>Moved in useful sample datasets from the DSR package.</p></li>
<li><p>Made compatible with both dplyr 0.4 and 0.5.</p></li>
<li><p>tidyr functions that create new columns are more aggresive about re-encoding the column names as UTF-8.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.4.1" id="tidyr-041">tidyr 0.4.1<small>2016-02-05</small><a class="anchor" aria-label="anchor" href="#tidyr-041"></a></h2>
<ul><li>Fixed bug in <code><a href="../reference/nest.html">nest()</a></code> where nested data was ending up in the wrong row (<a href="https://github.com/tidyverse/tidyr/issues/158" class="external-link">#158</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.4.0" id="tidyr-040">tidyr 0.4.0<small>2016-01-18</small><a class="anchor" aria-label="anchor" href="#tidyr-040"></a></h2>
<div class="section level3">
<h3 id="nested-data-frames-0-4-0">Nested data frames<a class="anchor" aria-label="anchor" href="#nested-data-frames-0-4-0"></a></h3>
<p><code><a href="../reference/nest.html">nest()</a></code> and <code><a href="../reference/nest.html">unnest()</a></code> have been overhauled to support a useful way of structuring data frames: the <strong>nested</strong> data frame. In a grouped data frame, you have one row per observation, and additional metadata define the groups. In a nested data frame, you have one <strong>row</strong> per group, and the individual observations are stored in a column that is a list of data frames. This is a useful structure when you have lists of other objects (like models) with one element per group.</p>
<ul><li><p><code><a href="../reference/nest.html">nest()</a></code> now produces a single list of data frames called “data” rather than a list column for each variable. Nesting variables are not included in nested data frames. It also works with grouped data frames made by <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by()</a></code>. You can override the default column name with <code>.key</code>.</p></li>
<li><p><code><a href="../reference/nest.html">unnest()</a></code> gains a <code>.drop</code> argument which controls what happens to other list columns. By default, they’re kept if the output doesn’t require row duplication; otherwise they’re dropped.</p></li>
<li><p><code><a href="../reference/nest.html">unnest()</a></code> now has <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> semantics for <code>...</code> - this allows you to unnest transformed columns more easily. (Previously it used select semantics).</p></li>
</ul></div>
<div class="section level3">
<h3 id="expanding-0-4-0">Expanding<a class="anchor" aria-label="anchor" href="#expanding-0-4-0"></a></h3>
<ul><li><p><code><a href="../reference/expand.html">expand()</a></code> once again allows you to evaluate arbitrary expressions like <code>full_seq(year)</code>. If you were previously using <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code> to created nested combinations, you’ll now need to use <code><a href="../reference/expand.html">nesting()</a></code> (<a href="https://github.com/tidyverse/tidyr/issues/85" class="external-link">#85</a>, <a href="https://github.com/tidyverse/tidyr/issues/121" class="external-link">#121</a>).</p></li>
<li><p><code><a href="../reference/expand.html">nesting()</a></code> and <code><a href="../reference/expand.html">crossing()</a></code> allow you to create nested and crossed data frames from individual vectors. <code><a href="../reference/expand.html">crossing()</a></code> is similar to <code><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">base::expand.grid()</a></code></p></li>
<li><p><code>full_seq(x, period)</code> creates the full sequence of values from <code>min(x)</code> to <code>max(x)</code> every <code>period</code> values.</p></li>
</ul></div>
<div class="section level3">
<h3 id="minor-bug-fixes-and-improvements-0-4-0">Minor bug fixes and improvements<a class="anchor" aria-label="anchor" href="#minor-bug-fixes-and-improvements-0-4-0"></a></h3>
<ul><li><p><code><a href="../reference/fill.html">fill()</a></code> fills in <code>NULL</code>s in list-columns.</p></li>
<li><p><code><a href="../reference/fill.html">fill()</a></code> gains a direction argument so that it can fill either upwards or downwards (<a href="https://github.com/tidyverse/tidyr/issues/114" class="external-link">#114</a>).</p></li>
<li><p><code><a href="../reference/gather.html">gather()</a></code> now stores the key column as character, by default. To revert to the previous behaviour of using a factor (which allows you to preserve the ordering of the columns), use <code>key_factor = TRUE</code> (<a href="https://github.com/tidyverse/tidyr/issues/96" class="external-link">#96</a>).</p></li>
<li><p>All tidyr verbs do the right thing for grouped data frames created by <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code> (<a href="https://github.com/tidyverse/tidyr/issues/122" class="external-link">#122</a>, <a href="https://github.com/tidyverse/tidyr/issues/129" class="external-link">#129</a>, <a href="https://github.com/tidyverse/tidyr/issues/81" class="external-link">#81</a>).</p></li>
<li><p><code>seq_range()</code> has been removed. It was never used or announced.</p></li>
<li><p><code><a href="../reference/spread.html">spread()</a></code> once again creates columns of mixed type when <code>convert = TRUE</code> (<a href="https://github.com/tidyverse/tidyr/issues/118" class="external-link">#118</a>, <a href="https://github.com/jennybc" class="external-link">@jennybc</a>). <code><a href="../reference/spread.html">spread()</a></code> with <code>drop = FALSE</code> handles zero-length factors (<a href="https://github.com/tidyverse/tidyr/issues/56" class="external-link">#56</a>). <code><a href="../reference/spread.html">spread()</a></code>ing a data frame with only key and value columns creates a one row output (<a href="https://github.com/tidyverse/tidyr/issues/41" class="external-link">#41</a>).</p></li>
<li><p><code><a href="../reference/unite.html">unite()</a></code> now removes old columns before adding new (<a href="https://github.com/tidyverse/tidyr/issues/89" class="external-link">#89</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
<li><p><code><a href="../reference/separate.html">separate()</a></code> now warns if defunct … argument is used (<a href="https://github.com/tidyverse/tidyr/issues/151" class="external-link">#151</a>, <a href="https://github.com/krlmlr" class="external-link">@krlmlr</a>).</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.3.1" id="tidyr-031">tidyr 0.3.1<small>2015-09-10</small><a class="anchor" aria-label="anchor" href="#tidyr-031"></a></h2>
<ul><li>Fixed bug where attributes of non-gather columns were lost (<a href="https://github.com/tidyverse/tidyr/issues/104" class="external-link">#104</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.3.0" id="tidyr-030">tidyr 0.3.0<small>2015-09-08</small><a class="anchor" aria-label="anchor" href="#tidyr-030"></a></h2>
<div class="section level3">
<h3 id="new-features-0-3-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-3-0"></a></h3>
<ul><li><p>New <code><a href="../reference/complete.html">complete()</a></code> provides a wrapper around <code><a href="../reference/expand.html">expand()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join()</a></code> and <code><a href="../reference/replace_na.html">replace_na()</a></code> for a common task: completing a data frame with missing combinations of variables.</p></li>
<li><p><code><a href="../reference/fill.html">fill()</a></code> fills in missing values in a column with the last non-missing value (<a href="https://github.com/tidyverse/tidyr/issues/4" class="external-link">#4</a>).</p></li>
<li><p>New <code><a href="../reference/replace_na.html">replace_na()</a></code> makes it easy to replace missing values with something meaningful for your data.</p></li>
<li><p><code><a href="../reference/nest.html">nest()</a></code> is the complement of <code><a href="../reference/nest.html">unnest()</a></code> (<a href="https://github.com/tidyverse/tidyr/issues/3" class="external-link">#3</a>).</p></li>
<li><p><code><a href="../reference/nest.html">unnest()</a></code> can now work with multiple list-columns at the same time. If you don’t supply any columns names, it will unlist all list-columns (<a href="https://github.com/tidyverse/tidyr/issues/44" class="external-link">#44</a>). <code><a href="../reference/nest.html">unnest()</a></code> can also handle columns that are lists of data frames (<a href="https://github.com/tidyverse/tidyr/issues/58" class="external-link">#58</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-minor-improvements-0-3-0">Bug fixes and minor improvements<a class="anchor" aria-label="anchor" href="#bug-fixes-and-minor-improvements-0-3-0"></a></h3>
<ul><li><p>tidyr no longer depends on reshape2. This should fix issues if you also try to load reshape (<a href="https://github.com/tidyverse/tidyr/issues/88" class="external-link">#88</a>).</p></li>
<li><p><code>%&gt;%</code> is re-exported from magrittr.</p></li>
<li><p><code><a href="../reference/expand.html">expand()</a></code> now supports nesting and crossing (see examples for details). This comes at the expense of creating new variables inline (<a href="https://github.com/tidyverse/tidyr/issues/46" class="external-link">#46</a>).</p></li>
<li><p><code>expand_</code> does SE evaluation correctly so you can pass it a character vector of columns names (or list of formulas etc) (<a href="https://github.com/tidyverse/tidyr/issues/70" class="external-link">#70</a>).</p></li>
<li><p><code><a href="../reference/extract.html">extract()</a></code> is 10x faster because it now uses stringi instead of base R regular expressions. It also returns NA instead of throwing an error if the regular expression doesn’t match (<a href="https://github.com/tidyverse/tidyr/issues/72" class="external-link">#72</a>).</p></li>
<li><p><code><a href="../reference/extract.html">extract()</a></code> and <code><a href="../reference/separate.html">separate()</a></code> preserve character vectors when <code>convert</code> is TRUE (<a href="https://github.com/tidyverse/tidyr/issues/99" class="external-link">#99</a>).</p></li>
<li><p>The internals of <code><a href="../reference/spread.html">spread()</a></code> have been rewritten, and now preserve all attributes of the input <code>value</code> column. This means that you can now spread date (<a href="https://github.com/tidyverse/tidyr/issues/62" class="external-link">#62</a>) and factor (<a href="https://github.com/tidyverse/tidyr/issues/35" class="external-link">#35</a>) inputs.</p></li>
<li><p><code><a href="../reference/spread.html">spread()</a></code> gives a more informative error message if <code>key</code> or <code>value</code> don’t exist in the input data (<a href="https://github.com/tidyverse/tidyr/issues/36" class="external-link">#36</a>).</p></li>
<li><p><code><a href="../reference/separate.html">separate()</a></code> only displays the first 20 failures (<a href="https://github.com/tidyverse/tidyr/issues/50" class="external-link">#50</a>). It has finer control over what happens if there are two few matches: you can fill with missing values on either the “left” or the “right” (<a href="https://github.com/tidyverse/tidyr/issues/49" class="external-link">#49</a>). <code><a href="../reference/separate.html">separate()</a></code> no longer throws an error if the number of pieces aren’t as expected - instead it uses drops extra values and fills on the right and gives a warning.</p></li>
<li><p>If the input is NA <code><a href="../reference/separate.html">separate()</a></code> and <code><a href="../reference/extract.html">extract()</a></code> both return silently return NA outputs, rather than throwing an error. (<a href="https://github.com/tidyverse/tidyr/issues/77" class="external-link">#77</a>)</p></li>
<li><p>Experimental <code><a href="../reference/nest.html">unnest()</a></code> method for lists has been removed.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.2.0" id="tidyr-020">tidyr 0.2.0<small>2014-12-05</small><a class="anchor" aria-label="anchor" href="#tidyr-020"></a></h2>
<div class="section level3">
<h3 id="new-functions-0-2-0">New functions<a class="anchor" aria-label="anchor" href="#new-functions-0-2-0"></a></h3>
<ul><li><p>Experimental <code><a href="../reference/expand.html">expand()</a></code> function (<a href="https://github.com/tidyverse/tidyr/issues/21" class="external-link">#21</a>).</p></li>
<li><p>Experiment <code><a href="../reference/nest.html">unnest()</a></code> function for converting named lists into data frames. (<a href="https://github.com/tidyverse/tidyr/issues/3" class="external-link">#3</a>, <a href="https://github.com/tidyverse/tidyr/issues/22" class="external-link">#22</a>)</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-and-minor-improvements-0-2-0">Bug fixes and minor improvements<a class="anchor" aria-label="anchor" href="#bug-fixes-and-minor-improvements-0-2-0"></a></h3>
<ul><li><p><code><a href="../reference/extract_numeric.html">extract_numeric()</a></code> preserves negative signs (<a href="https://github.com/tidyverse/tidyr/issues/20" class="external-link">#20</a>).</p></li>
<li><p><code><a href="../reference/gather.html">gather()</a></code> has better defaults if <code>key</code> and <code>value</code> are not supplied. If <code>...</code> is ommitted, <code><a href="../reference/gather.html">gather()</a></code> selects all columns (<a href="https://github.com/tidyverse/tidyr/issues/28" class="external-link">#28</a>). Performance is now comparable to <code>reshape2::melt()</code> (<a href="https://github.com/tidyverse/tidyr/issues/18" class="external-link">#18</a>).</p></li>
<li><p><code><a href="../reference/separate.html">separate()</a></code> gains <code>extra</code> argument which lets you control what happens to extra pieces. The default is to throw an “error”, but you can also “merge” or “drop”.</p></li>
<li><p><code><a href="../reference/spread.html">spread()</a></code> gains <code>drop</code> argument, which allows you to preserve missing factor levels (<a href="https://github.com/tidyverse/tidyr/issues/25" class="external-link">#25</a>). It converts factor value variables to character vectors, instead of embedding a matrix inside the data frame (<a href="https://github.com/tidyverse/tidyr/issues/35" class="external-link">#35</a>).</p></li>
</ul></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="tidyverse">
  <p>tidyr is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org" class="external-link">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>
    Developed by .
    Site built by <a href="https://pkgdown.r-lib.org" class="external-link">pkgdown</a>.
  </p>
</div>

      </footer></div>

  


  

  </body></html>

